(this["webpackJsonpsmart-chats"]=this["webpackJsonpsmart-chats"]||[]).push([[0],{108:function(e,t,s){"use strict";s.r(t);var n=s(1),i=s.n(n),c=s(56),l=s.n(c),a=(s(72),s(3)),r=s(2),o=s.n(r),d=s(5),u=(s(74),s(75),function(e,t){switch(t.type){case"LOGIN_START":return{user:null,isFetching:!0,error:!1};case"LOGIN_SUCCESS":return{user:t.payload,isFetching:!1,error:!1};case"LOGIN_FAILURE":return{user:null,isFetching:!1,error:t.payload};default:return e}}),j=s(0),b={user:null,isFetching:!1,error:!1},v=Object(n.createContext)(b),h=function(e){var t=e.children,s=Object(n.useReducer)(u,b),i=Object(a.a)(s,2),c=i[0],l=i[1];return Object(j.jsx)(v.Provider,{value:{user:c.user,isFetching:c.isFetching,error:c.error,dispatch:l},children:t})};var p=s(4),x=s.n(p),f=s.p+"static/media/user.2fda6558.png",O=s(40),m=s(6),g=s(7);function y(e){var t,s=Object(n.useContext)(v).user,i=Object(n.useState)({}),c=Object(a.a)(i,2),l=c[0],r=c[1],u=Object(n.useState)(),b=Object(a.a)(u,2),h=b[0],p=b[1],y=Object(n.useState)(e.post.likes.length),w=Object(a.a)(y,2),k=w[0],C=w[1],S=Object(n.useState)(),N=Object(a.a)(S,2),_=N[0],I=N[1],F=Object(m.g)();console.log(e.post),Object(n.useEffect)((function(){p(e.post.likes.includes(null===s||void 0===s?void 0:s._id))}),[s]),Object(n.useEffect)((function(){I(h?"fas":"far")}),[h]),Object(n.useEffect)((function(){var t=function(){var t=Object(d.a)(o.a.mark((function t(){var s,n;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,x.a.get("http://localhost:5000/api/users/".concat(null===(s=e.post)||void 0===s?void 0:s.userId));case 2:n=t.sent,r(n.data);case 4:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();t()}),[null===(t=e.post)||void 0===t?void 0:t.userId]);var R=function(){var t=Object(d.a)(o.a.mark((function t(){return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return C(h?k-1:k+1),I(h?"far":"fas"),p(!h),t.next=5,x.a.put("http://localhost:5000/api/posts/".concat(e.post._id,"/like"),{userId:s._id});case 5:console.log(l._id),console.log(s._id);case 7:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),U=function(){var t=Object(d.a)(o.a.mark((function t(){return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!window.confirm("Are you sure,you want to delete this post??")){t.next=5;break}return t.next=3,x.a.delete("http://localhost:5000/api/posts/".concat(e.post._id));case 3:"successfully deleted"===t.sent.data&&F.push("/");case 5:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();return Object(j.jsx)("div",{className:"card mb-3",style:{position:"relative",top:"8px"},children:Object(j.jsxs)("div",{className:"card-body",children:[Object(j.jsxs)("div",{className:"card-title d-flex justify-content-between",children:[Object(j.jsxs)("div",{children:[Object(j.jsx)(g.b,{to:"/profile/".concat(null===l||void 0===l?void 0:l.name),children:Object(j.jsx)("img",{src:(null===l||void 0===l?void 0:l.profilePicture)?null===l||void 0===l?void 0:l.profilePicture:f,alt:"",width:32,height:32,className:"rounded-circle me-2"})}),Object(j.jsx)("strong",{children:null===l||void 0===l?void 0:l.name}),Object(j.jsx)("small",{style:{position:"relative",left:"1.5vw"},children:Object(O.a)(e.post.createdAt)})]}),Object(j.jsx)("i",{style:{cursor:"pointer",display:(null===s||void 0===s?void 0:s._id)!==(null===l||void 0===l?void 0:l._id)||!1===e.bool?"none":""},onClick:U,class:"fas fa-trash"})]}),Object(j.jsx)("p",{children:Object(j.jsx)("strong",{children:e.post.desc})}),Object(j.jsx)("div",{style:{display:"flex",justifyContent:"center"},children:Object(j.jsx)("img",{style:{maxWidth:"100%"},src:e.post.img,alt:""})}),Object(j.jsxs)("div",{style:{position:"relative",top:"5px",display:"flex",alignItems:"center",paddingTop:"10px"},children:[Object(j.jsx)("i",{onClick:R,style:{cursor:"pointer"},className:"".concat(_," fa-heart fa-2x")}),Object(j.jsxs)("span",{style:{position:"relative",left:".6vw"},children:[k," likes"]})]})]})})}function w(){var e=Object(n.useContext)(v).user,t=Object(n.useState)([]),s=Object(a.a)(t,2),i=s[0],c=s[1],l=Object(n.useState)(null),r=Object(a.a)(l,2),u=r[0],b=r[1];return Object(n.useEffect)((function(){var t=function(){var t=Object(d.a)(o.a.mark((function t(){var s;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,x.a.get("http://localhost:5000/api/posts/timeline/".concat(null===e||void 0===e?void 0:e._id));case 3:s=t.sent,b(s.data.sort((function(e,t){return new Date(t.createdAt)-new Date(e.createdAt)}))),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),console.log(t.t0);case 10:case"end":return t.stop()}}),t,null,[[0,7]])})));return function(){return t.apply(this,arguments)}}();t();var s=function(){var e=Object(d.a)(o.a.mark((function e(){var t;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,x.a.get("http://localhost:5000/api/users/");case 2:t=e.sent,c(t.data);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();s()}),[e]),Object(j.jsx)("div",{children:0!==(null===u||void 0===u?void 0:u.length)?Object(j.jsx)(j.Fragment,{children:null===u||void 0===u?void 0:u.map((function(e){return Object(j.jsx)(y,{post:e,bool:!1})}))}):Object(j.jsxs)("div",{children:[Object(j.jsx)("div",{style:{textAlign:"center",paddingTop:"10px",paddingBottom:"10px"},children:Object(j.jsx)("h1",{children:Object(j.jsx)("b",{children:"Follow these people to see their post:-"})})}),Object(j.jsx)(j.Fragment,{children:Object(j.jsx)("ul",{className:"nav nav-pills flex-column mb-auto py-2",children:i.map((function(e){return Object(j.jsx)("li",{className:"nav-link link-dark text-decoration-none",children:Object(j.jsxs)("div",{className:"d-flex card-body",children:[Object(j.jsx)(g.b,{to:"/profile/".concat(null===e||void 0===e?void 0:e.name),children:Object(j.jsx)("div",{style:{height:"13vw",width:"13vw",display:"flex",justifyContent:"center",alignItems:"center",border:"solid white 3px",backgroundColor:"black",overflow:"hidden"},class:"avatar rounded-circle",children:Object(j.jsx)("img",{src:(null===e||void 0===e?void 0:e.profilePicture)?null===e||void 0===e?void 0:e.profilePicture:f,alt:"",style:{maxHeight:"100%",maxWidth:"100%"}})})}),Object(j.jsx)("div",{style:{width:"60%",height:"13vw",position:"relative",left:"3vw",display:"flex",alignItems:"center"},children:Object(j.jsxs)("ul",{style:{listStyle:"none",fontSize:"2vw"},children:[Object(j.jsx)("li",{children:Object(j.jsx)("strong",{children:null===e||void 0===e?void 0:e.name})}),Object(j.jsxs)("li",{children:[Object(j.jsx)("b",{children:"City:"})," ",(null===e||void 0===e?void 0:e.city)?null===e||void 0===e?void 0:e.city:"Unknown"]}),Object(j.jsxs)("li",{children:[Object(j.jsx)("b",{children:"From:"})," ",(null===e||void 0===e?void 0:e.from)?null===e||void 0===e?void 0:e.from:"Unknown"]}),Object(j.jsxs)("li",{children:[Object(j.jsx)("b",{children:"Relationship Status:"})," ",(null===e||void 0===e?void 0:e.relationship)?null===e||void 0===e?void 0:e.relationship:"Unknown"]})]})})]})})}))})})]})})}function k(){var e=Object(m.g)(),t=Object(n.useContext)(v),s=t.user,i=t.dispatch,c=t.error,l=Object(n.useState)(""),r=Object(a.a)(l,2),u=r[0],b=r[1],h=function(){var t=Object(d.a)(o.a.mark((function t(s){var n;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return s.preventDefault(),t.next=3,x.a.get("http://localhost:5000/api/users/find/".concat(u));case 3:n=t.sent,e.push("/search/".concat(u)),console.log(n.data);case 6:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();return Object(j.jsx)("div",{children:Object(j.jsx)("nav",{className:"navbar fixed-top navbar-expand-md navbar-dark",style:{backgroundColor:"#1877f2"},children:Object(j.jsxs)("div",{className:"container-fluid",children:[Object(j.jsxs)("div",{className:"navbar-brand",style:{display:"flex",alignItems:"center"},children:[Object(j.jsxs)("div",{class:"dropend",children:[Object(j.jsx)("img",{type:"button","data-bs-toggle":"dropdown","aria-expanded":"false",src:(null===s||void 0===s?void 0:s.profilePicture)?null===s||void 0===s?void 0:s.profilePicture:f,alt:"",width:32,height:32,className:"rounded-circle me-2 dropdown-toggle"}),Object(j.jsxs)("ul",{class:"dropdown-menu",children:[Object(j.jsx)("li",{children:Object(j.jsx)(g.b,{to:"/profile/".concat(null===s||void 0===s?void 0:s.name),class:"dropdown-item",children:Object(j.jsx)("b",{children:"Profile"})})}),Object(j.jsx)("li",{children:Object(j.jsx)(g.b,{className:"dropdown-item",to:"/messenger",children:Object(j.jsx)("b",{children:"Messages"})})}),Object(j.jsx)("li",{onClick:function(){sessionStorage.removeItem("token"),i({type:"LOGIN_FAILURE",payload:c}),e.push("/login")},style:{cursor:"pointer"},class:"dropdown-item",children:Object(j.jsx)("b",{children:"Log out"})})]})]}),Object(j.jsx)("b",{children:"Smart-Chats"})]}),Object(j.jsx)("button",{className:"navbar-toggler",type:"button","data-bs-toggle":"collapse","data-bs-target":"#navbarSupportedContent","aria-controls":"navbarSupportedContent","aria-expanded":"false","aria-label":"Toggle navigation",children:Object(j.jsx)("span",{className:"navbar-toggler-icon"})}),Object(j.jsxs)("div",{className:"collapse navbar-collapse",id:"navbarSupportedContent",children:[Object(j.jsxs)("ul",{className:"navbar-nav me-auto mb-2 mb-md-0",children:[Object(j.jsx)("li",{className:"nav-item",children:Object(j.jsx)(g.b,{className:"nav-link active","aria-current":"page",to:"/",children:"Homepage"})}),Object(j.jsx)("li",{className:"nav-item hide",style:{alignItems:"center"},children:Object(j.jsx)(g.b,{to:"/messenger",children:Object(j.jsx)("i",{className:"fas fa-comment-alt nav-link active"})})})]}),Object(j.jsxs)("form",{className:"d-flex",onSubmit:h,children:[Object(j.jsx)("input",{value:u,onChange:function(e){return b(e.target.value)},className:"form-control me-2",type:"search",placeholder:"Search for friends","aria-label":"Search",style:{width:"30vw",borderRadius:"2vh",border:"solid black .2vh"}}),Object(j.jsxs)("button",{className:"btn",type:"submit",style:{display:"flex",alignItems:"center",backgroundColor:"#1877f2"},children:[" ",Object(j.jsx)("i",{className:"fas fa-search"})]})]})]})]})})})}var C=s.p+"static/media/gift-1020-542634.2852fa24.png",S=s.p+"static/media/crowd1.7f73f4a1.jpg";function N(e){var t=Object(n.useState)({}),s=Object(a.a)(t,2),i=s[0],c=s[1];return Object(n.useEffect)((function(){var t=function(){var t=Object(d.a)(o.a.mark((function t(){var s;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,x.a.get("http://localhost:5000/api/users/".concat(e.id));case 2:s=t.sent,c(s.data);case 4:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();t()}),[e.id]),Object(j.jsxs)("div",{className:"d-flex align-items-center nav-link link-dark text-decoration-none",children:[Object(j.jsx)("img",{src:i.profilePicture?i.profilePicture:f,alt:"",width:32,height:32,className:"rounded-circle me-2"}),Object(j.jsx)("span",{className:"position-absolute top-1 start-1 translate-middle p-2 bg-success border border-light rounded-circle",children:Object(j.jsx)("span",{className:"visually-hidden",children:"New alerts"})}),Object(j.jsx)("strong",{children:i.name})]})}function _(){var e=Object(n.useContext)(v).user,t=Object(n.useState)([]),s=Object(a.a)(t,2),i=s[0],c=s[1];return Object(n.useEffect)((function(){var t=null===e||void 0===e?void 0:e.followings;t=(null===e||void 0===e?void 0:e.followings)?t.concat(null===e||void 0===e?void 0:e.followers):null===e||void 0===e?void 0:e.followers,c(t)}),[e]),Object(j.jsx)("div",{className:"p-3 bg-light right",children:Object(j.jsxs)("ul",{className:"nav nav-pills flex-column mb-auto",children:[Object(j.jsxs)("div",{style:{display:"flex",alignItems:"center",width:"28vw"},children:[Object(j.jsx)("div",{style:{height:"55px",width:"50px"},children:Object(j.jsx)("img",{style:{maxHeight:"100%",maxWidth:"100%"},src:C,alt:""})}),Object(j.jsxs)("p",{children:[Object(j.jsx)("strong",{children:"Tarun"})," and ",Object(j.jsx)("strong",{children:"3 others"})," have birthday today!! wish them now"]})]}),Object(j.jsx)("div",{style:{width:"27vw"},children:Object(j.jsx)("img",{style:{width:"27vw",maxHeight:"30vh"},className:"img-fluid",src:S,alt:""})}),Object(j.jsx)("hr",{}),Object(j.jsx)("strong",{style:{fontSize:"4vh"},children:"Online friends"}),i&&0!==i.length&&i.map((function(e){return Object(j.jsx)(N,{id:e})}))]})})}function I(){Object(n.useEffect)((function(){window.scrollTo(0,0)}),[]);var e=Object(n.useContext)(v).user;return Object(j.jsx)(j.Fragment,{children:null!==e?Object(j.jsxs)(j.Fragment,{children:[Object(j.jsx)(k,{}),Object(j.jsxs)("div",{className:"d-flex",children:[Object(j.jsx)("div",{className:"top",style:{position:"relative",top:"57px",left:"1vw"},children:Object(j.jsx)(w,{})}),Object(j.jsx)("div",{style:{position:"relative",top:"65px",left:"2vw"},children:Object(j.jsx)(_,{})})]})]}):Object(j.jsx)("div",{})})}var F=s(38);s(109);F.a.initializeApp({apiKey:"AIzaSyAH5d3Wjr_NgyJgdx9ra7WjZOzmVx08eHk",authDomain:"fir-react-upload-391f1.firebaseapp.com",projectId:"fir-react-upload-391f1",storageBucket:"fir-react-upload-391f1.appspot.com",messagingSenderId:"815346693654",appId:"1:815346693654:web:9d67a268ca505c96fa6737",measurementId:"G-J6R2THCK2K"});var R=F.a.storage();function U(e){var t=Object(n.useState)({}),s=Object(a.a)(t,2),i=s[0],c=s[1];return Object(n.useEffect)((function(){var t=function(){var t=Object(d.a)(o.a.mark((function t(){var s;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,x.a.get("http://localhost:5000/api/users/".concat(e.id));case 2:s=t.sent,c(s.data);case 4:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();t()}),[e.id]),Object(j.jsxs)("div",{className:"d-flex nav-link link-dark text-decoration-none",children:[Object(j.jsx)(g.b,{to:"/profile/".concat(null===i||void 0===i?void 0:i.name),children:Object(j.jsx)("div",{style:{height:"25vw",width:"25vw",display:"flex",justifyContent:"center",alignItems:"center",border:"solid white 3px",backgroundColor:"black",overflow:"hidden"},class:"avatar rounded-circle",children:Object(j.jsx)("img",{src:(null===i||void 0===i?void 0:i.profilePicture)?null===i||void 0===i?void 0:i.profilePicture:f,alt:"",style:{maxHeight:"100%",maxWidth:"100%"}})})}),Object(j.jsx)("div",{style:{width:"53vw",height:"25vw",position:"relative",left:"-2.5vw",display:"flex",alignItems:"center"},children:Object(j.jsxs)("ul",{style:{listStyle:"none",fontSize:"2.8vw"},children:[Object(j.jsx)("li",{children:Object(j.jsx)("strong",{children:null===i||void 0===i?void 0:i.name})}),Object(j.jsxs)("li",{children:[Object(j.jsx)("b",{children:"City:"})," ",(null===i||void 0===i?void 0:i.city)?null===i||void 0===i?void 0:i.city:"Unknown"]}),Object(j.jsxs)("li",{children:[Object(j.jsx)("b",{children:"From:"})," ",(null===i||void 0===i?void 0:i.from)?null===i||void 0===i?void 0:i.from:"Unknown"]}),Object(j.jsxs)("li",{children:[Object(j.jsx)("b",{children:"Relationship Status:"})," ",(null===i||void 0===i?void 0:i.relationship)?(null===i||void 0===i?void 0:i.relationship.length)>20?(null===i||void 0===i?void 0:i.relationship.slice(0,20))+"...":null===i||void 0===i?void 0:i.relationship:"Unknown"]})]})})]})}function L(e){var t,s,i,c,l,r,u,b,h,p,O,g,y,w,k,C,S,N=Object(m.g)(),_=Object(n.useContext)(v).user,I=Object(n.useState)(null),F=Object(a.a)(I,2),L=F[0],P=F[1],E=Object(n.useRef)(),A=Object(n.useState)(null===(t=e.user)||void 0===t?void 0:t.followers.includes(null===_||void 0===_?void 0:_._id)),B=Object(a.a)(A,2),z=B[0],D=B[1],M=Object(n.useState)(null),T=Object(a.a)(M,2),W=T[0],H=T[1];Object(n.useEffect)((function(){var t,s,n;console.log(null===_||void 0===_?void 0:_._id),console.log(null===(t=e.user)||void 0===t?void 0:t._id),console.log(null===(s=e.user)||void 0===s?void 0:s.followers.includes(null===_||void 0===_?void 0:_._id)),D(null===(n=e.user)||void 0===n?void 0:n.followers.includes(null===_||void 0===_?void 0:_._id))}),[_,null===(s=e.user)||void 0===s?void 0:s._id]),Object(n.useEffect)((function(){var t,s,n,i,c=null===(t=e.user)||void 0===t?void 0:t.following;(null===(s=e.user)||void 0===s?void 0:s.following)?c=c.concat(null===(n=e.user)||void 0===n?void 0:n.followers.filter((function(t){var s;return!(null===(s=e.user)||void 0===s?void 0:s.following.includes(t))}))):c=null===(i=e.user)||void 0===i?void 0:i.followers;0!==c.length&&H(c)}),[e.user]);var G=function(){var t=Object(d.a)(o.a.mark((function t(){var s,n;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(z){t.next=7;break}return t.next=3,x.a.put("http://localhost:5000/api/users/".concat(null===(s=e.user)||void 0===s?void 0:s._id,"/follow"),{userId:null===_||void 0===_?void 0:_._id});case 3:"you are following"===t.sent.data&&window.location.reload(),t.next=11;break;case 7:return t.next=9,x.a.put("http://localhost:5000/api/users/".concat(null===(n=e.user)||void 0===n?void 0:n._id,"/unfollow"),{userId:null===_||void 0===_?void 0:_._id});case 9:"you are unfollowing"===t.sent.data&&window.location.reload();case 11:D(!z);case 12:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),q=function(){var e=Object(d.a)(o.a.mark((function e(t){var s;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),""===V&&""===$&&""===se&&""===le){e.next=10;break}return e.next=4,x.a.put("http://localhost:5000/api/users/".concat(null===_||void 0===_?void 0:_._id),{city:""!==V?V:_.city,from:""!==$?$:_.from,relationship:""!==se?se:_.relationship,desc:""!==le?le:_.desc});case 4:s=e.sent,X(""),Q(""),ne(""),ae(""),"successfully updated"===s.data&&window.location.reload();case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),J=Object(n.useState)(""),K=Object(a.a)(J,2),V=K[0],X=K[1],Y=Object(n.useState)(""),Z=Object(a.a)(Y,2),$=Z[0],Q=Z[1],ee=Object(n.useState)(""),te=Object(a.a)(ee,2),se=te[0],ne=te[1],ie=Object(n.useState)(""),ce=Object(a.a)(ie,2),le=ce[0],ae=ce[1];return Object(j.jsx)(j.Fragment,{children:null!==e.user&&null!==_?Object(j.jsxs)(j.Fragment,{children:[Object(j.jsx)("div",{className:"card mb-3 upload",style:{position:"relative",top:"15px",display:(null===_||void 0===_?void 0:_._id)!==(null===(i=e.user)||void 0===i?void 0:i._id)?"none":""},children:Object(j.jsx)("div",{className:"card-body",children:Object(j.jsxs)("form",{onSubmit:function(t){t.preventDefault(),e.progress(10);var s=R.ref("images/".concat(null===L||void 0===L?void 0:L.name)).put(L);e.progress(30),s.on("state_changed",(function(e){}),(function(e){console.log(e)}),(function(){R.ref("images").child(L.name).getDownloadURL().then((function(t){e.progress(70),x.a.post("http://localhost:5000/api/posts",{userId:e.user._id,img:t,desc:E.current.value}).then(e.progress(100),N.push("/"))}))}))},children:[Object(j.jsxs)("div",{className:"card-title d-flex",children:[Object(j.jsx)("img",{src:(null===(c=e.user)||void 0===c?void 0:c.profilePicture)?null===(l=e.user)||void 0===l?void 0:l.profilePicture:f,alt:"",width:40,height:40,className:"rounded-circle me-2"}),Object(j.jsx)("input",{className:"textarea",style:{border:"none",outline:"none",position:"relative",left:"1vw"},id:"",placeholder:"What's in your mind...",ref:E})]}),Object(j.jsx)("hr",{}),Object(j.jsxs)("div",{className:"row row-cols-sm-1 row-cols-md-3 align-items-stretch g-2",style:{position:"relative",top:"3vh",paddingBottom:"30px"},children:[Object(j.jsxs)("div",{className:"col",style:{position:"relative",left:"2vw"},children:[Object(j.jsx)("i",{class:"far fa-images fa-2x"}),Object(j.jsx)("b",{children:"   Upload images"})]}),Object(j.jsx)("input",{style:{position:"relative",left:"2vw"},type:"file",id:"file",onChange:function(e){e.target.files[0]&&P(e.target.files[0])}}),Object(j.jsx)("div",{style:{position:"relative",left:"2vw"},children:Object(j.jsx)("button",{className:"btn btn-success",type:"submit",disabled:null===L?"true":"",children:"Share"})})]})]})})}),Object(j.jsx)("div",{children:Object(j.jsxs)("div",{className:"p-3 bg-light frnds",children:[Object(j.jsx)("button",{onClick:G,style:{display:(null===_||void 0===_?void 0:_._id)===(null===(r=e.user)||void 0===r?void 0:r._id)?"none":""},className:"btn btn-primary",children:z?"Unfollow":"Follow"}),Object(j.jsxs)("ul",{className:"nav nav-pills flex-column mb-auto py-2",children:[Object(j.jsxs)("div",{style:{width:"80vw"},children:[Object(j.jsxs)("strong",{children:["About ",null===(u=e.user)||void 0===u?void 0:u.name]}),Object(j.jsx)("i",{style:{position:"relative",left:"5vw",display:(null===(b=e.user)||void 0===b?void 0:b._id)===_._id?"":"none"},type:"button","data-bs-toggle":"modal","data-bs-target":"#exampleModal2",class:"far fa-edit"}),Object(j.jsx)("div",{class:"modal fade",id:"exampleModal2",tabindex:"-1","aria-labelledby":"exampleModalLabel","aria-hidden":"true",children:Object(j.jsx)("div",{class:"modal-dialog",children:Object(j.jsxs)("div",{class:"modal-content",children:[Object(j.jsxs)("div",{class:"modal-header",style:{color:"white",backgroundColor:"black"},children:[Object(j.jsx)("h5",{class:"modal-title",id:"exampleModalLabel",children:Object(j.jsxs)("b",{children:["About ",null===(h=e.user)||void 0===h?void 0:h.name]})}),Object(j.jsx)("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})]}),Object(j.jsx)("div",{class:"modal-body",children:Object(j.jsxs)("form",{onSubmit:q,children:[Object(j.jsxs)("div",{class:"mb-3",children:[Object(j.jsx)("label",{for:"city-name",class:"col-form-label",children:Object(j.jsx)("b",{children:"City:"})}),Object(j.jsx)("input",{type:"text",class:"form-control",id:"city-name",value:V,onChange:function(e){return X(e.target.value)}})]}),Object(j.jsxs)("div",{class:"mb-3",children:[Object(j.jsx)("label",{for:"from",class:"col-form-label",children:Object(j.jsx)("b",{children:"From:"})}),Object(j.jsx)("input",{type:"text",class:"form-control",id:"from",value:$,onChange:function(e){return Q(e.target.value)}})]}),Object(j.jsxs)("div",{class:"mb-3",children:[Object(j.jsx)("label",{for:"relation",class:"col-form-label",children:Object(j.jsx)("b",{children:"Relationship:"})}),Object(j.jsx)("input",{type:"text",class:"form-control",id:"relation",value:se,onChange:function(e){return ne(e.target.value)}})]}),Object(j.jsxs)("div",{class:"mb-3",children:[Object(j.jsx)("label",{for:"desc",class:"col-form-label",children:Object(j.jsx)("b",{children:"Description:"})}),Object(j.jsx)("input",{type:"text",class:"form-control",id:"desc",value:le,onChange:function(e){return ae(e.target.value)}})]}),Object(j.jsxs)("div",{class:"modal-footer",children:[Object(j.jsx)("button",{type:"button",class:"btn btn-secondary","data-bs-dismiss":"modal",children:"Close"}),Object(j.jsx)("button",{class:"btn btn-primary","data-bs-dismiss":"modal",type:"submit",children:"Save changes"})]})]})})]})})}),Object(j.jsxs)("ul",{children:[Object(j.jsxs)("li",{children:[Object(j.jsx)("b",{children:"City:"})," ",(null===(p=e.user)||void 0===p?void 0:p.city)?null===(O=e.user)||void 0===O?void 0:O.city:"Unknown"]}),Object(j.jsxs)("li",{children:[Object(j.jsx)("b",{children:"From:"})," ",(null===(g=e.user)||void 0===g?void 0:g.from)?null===(y=e.user)||void 0===y?void 0:y.from:"Unknown"]}),Object(j.jsxs)("li",{children:[Object(j.jsx)("b",{children:"Relationship Status:"})," ",(null===(w=e.user)||void 0===w?void 0:w.relationship)?(null===(k=e.user)||void 0===k?void 0:k.relationship.length)>20?null===(C=e.user)||void 0===C?void 0:C.relationship.slice(0,20):null===(S=e.user)||void 0===S?void 0:S.relationship:"Unknown"]})]})]}),Object(j.jsx)("hr",{}),Object(j.jsx)("button",{type:"button","data-bs-toggle":"modal","data-bs-target":"#staticBackdrop2",className:"btn btn-secondary",children:"Friends"}),Object(j.jsx)("div",{class:"modal fade",id:"staticBackdrop2","data-bs-backdrop":"static","data-bs-keyboard":"false",tabindex:"-1","aria-labelledby":"staticBackdropLabel","aria-hidden":"true",children:Object(j.jsx)("div",{class:"modal-dialog",children:Object(j.jsxs)("div",{class:"modal-content",children:[Object(j.jsxs)("div",{class:"modal-header",style:{color:"white",backgroundColor:"black"},children:[Object(j.jsx)("h5",{class:"modal-title",id:"staticBackdropLabel",children:Object(j.jsx)("b",{children:"Friends"})}),Object(j.jsx)("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})]}),Object(j.jsx)("div",{class:"modal-body",children:Object(j.jsx)("ul",{className:"nav nav-pills flex-column mb-auto",children:null!==W?W.map((function(e){return Object(j.jsx)("li",{"data-bs-dismiss":"modal",children:Object(j.jsx)(U,{id:e})})})):Object(j.jsx)("div",{children:"No friends added"})})}),Object(j.jsx)("div",{class:"modal-footer",children:Object(j.jsx)("button",{type:"button",class:"btn btn-secondary","data-bs-dismiss":"modal",children:"Close"})})]})})})]})]})})]}):Object(j.jsx)("div",{})})}function P(e){var t=Object(n.useState)({}),s=Object(a.a)(t,2),i=s[0],c=s[1];return Object(n.useEffect)((function(){var t=function(){var t=Object(d.a)(o.a.mark((function t(){var s;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,x.a.get("http://localhost:5000/api/users/".concat(e.id));case 2:s=t.sent,c(s.data);case 4:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();t()}),[e.id]),Object(j.jsxs)("div",{className:"d-flex nav-link link-dark text-decoration-none",children:[Object(j.jsx)(g.b,{to:"/profile/".concat(null===i||void 0===i?void 0:i.name),children:Object(j.jsx)("div",{style:{height:"12vw",width:"12vw",display:"flex",justifyContent:"center",alignItems:"center",border:"solid white 3px",backgroundColor:"black",overflow:"hidden",position:"relative",left:"-1.5vw"},class:"avatar rounded-circle",children:Object(j.jsx)("img",{src:(null===i||void 0===i?void 0:i.profilePicture)?null===i||void 0===i?void 0:i.profilePicture:f,alt:"",style:{maxHeight:"100%",maxWidth:"100%"}})})}),Object(j.jsx)("div",{style:{width:"14vw",height:"12svw",position:"relative",left:"-2.5vw",display:"flex",alignItems:"center"},children:Object(j.jsxs)("ul",{style:{listStyle:"none",fontSize:"1.3vw"},children:[Object(j.jsx)("li",{children:Object(j.jsx)("strong",{children:null===i||void 0===i?void 0:i.name})}),Object(j.jsxs)("li",{children:[Object(j.jsx)("b",{children:"City:"})," ",(null===i||void 0===i?void 0:i.city)?null===i||void 0===i?void 0:i.city:"Unknown"]}),Object(j.jsxs)("li",{children:[Object(j.jsx)("b",{children:"From:"})," ",(null===i||void 0===i?void 0:i.from)?null===i||void 0===i?void 0:i.from:"Unknown"]}),Object(j.jsxs)("li",{children:[Object(j.jsx)("b",{children:"Relationship Status:"})," ",(null===i||void 0===i?void 0:i.relationship)?null===i||void 0===i?void 0:i.relationship:"Unknown"]})]})})]})}function E(e){var t,s,i,c,l,r,u,b,h,p,f,O,m,g,y=Object(n.useContext)(v).user,w=Object(n.useState)(null===(t=e.user)||void 0===t?void 0:t.followers.includes(null===y||void 0===y?void 0:y._id)),k=Object(a.a)(w,2),C=k[0],S=k[1],N=Object(n.useState)(null),_=Object(a.a)(N,2),I=_[0],F=_[1];Object(n.useEffect)((function(){var t,s,n;console.log(null===y||void 0===y?void 0:y._id),console.log(null===(t=e.user)||void 0===t?void 0:t._id),console.log(null===(s=e.user)||void 0===s?void 0:s.followers.includes(null===y||void 0===y?void 0:y._id)),S(null===(n=e.user)||void 0===n?void 0:n.followers.includes(null===y||void 0===y?void 0:y._id))}),[y,null===(s=e.user)||void 0===s?void 0:s._id]),Object(n.useEffect)((function(){var t,s,n,i,c=null===(t=e.user)||void 0===t?void 0:t.following;(null===(s=e.user)||void 0===s?void 0:s.following)?c=c.concat(null===(n=e.user)||void 0===n?void 0:n.followers.filter((function(t){var s;return!(null===(s=e.user)||void 0===s?void 0:s.following.includes(t))}))):c=null===(i=e.user)||void 0===i?void 0:i.followers;0!==c.length&&F(c)}),[e.user]);var R=function(){var t=Object(d.a)(o.a.mark((function t(){var s,n;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(C){t.next=7;break}return t.next=3,x.a.put("http://localhost:5000/api/users/".concat(null===(s=e.user)||void 0===s?void 0:s._id,"/follow"),{userId:null===y||void 0===y?void 0:y._id});case 3:"you are following"===t.sent.data&&window.location.reload(),t.next=11;break;case 7:return t.next=9,x.a.put("http://localhost:5000/api/users/".concat(null===(n=e.user)||void 0===n?void 0:n._id,"/unfollow"),{userId:null===y||void 0===y?void 0:y._id});case 9:"you are unfollowing"===t.sent.data&&window.location.reload();case 11:S(!C);case 12:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),U=function(){var e=Object(d.a)(o.a.mark((function e(t){var s;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),""===A&&""===M&&""===G&&""===V){e.next=10;break}return e.next=4,x.a.put("http://localhost:5000/api/users/".concat(null===y||void 0===y?void 0:y._id),{city:""!==A?A:y.city,from:""!==M?M:y.from,relationship:""!==G?G:y.relationship,desc:""!==V?V:y.desc});case 4:s=e.sent,B(""),T(""),q(""),X(""),"successfully updated"===s.data&&window.location.reload();case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),L=Object(n.useState)(""),E=Object(a.a)(L,2),A=E[0],B=E[1],z=Object(n.useState)(""),D=Object(a.a)(z,2),M=D[0],T=D[1],W=Object(n.useState)(""),H=Object(a.a)(W,2),G=H[0],q=H[1],J=Object(n.useState)(""),K=Object(a.a)(J,2),V=K[0],X=K[1];return Object(j.jsxs)("div",{className:"p-3 bg-light right",children:[Object(j.jsx)("button",{onClick:R,style:{display:(null===y||void 0===y?void 0:y._id)===(null===(i=e.user)||void 0===i?void 0:i._id)?"none":""},className:"btn btn-primary",children:C?"Unfollow":"Follow"}),Object(j.jsxs)("ul",{className:"nav nav-pills flex-column mb-auto py-2",children:[Object(j.jsxs)("div",{style:{width:"28vw"},children:[Object(j.jsxs)("strong",{children:["About ",null===(c=e.user)||void 0===c?void 0:c.name]}),Object(j.jsx)("i",{style:{position:"relative",left:"5vw",display:(null===(l=e.user)||void 0===l?void 0:l._id)===y._id?"":"none"},type:"button","data-bs-toggle":"modal","data-bs-target":"#exampleModal4",class:"far fa-edit"}),Object(j.jsx)("div",{class:"modal fade",id:"exampleModal4",tabindex:"-1","aria-labelledby":"exampleModalLabel","aria-hidden":"true",children:Object(j.jsx)("div",{class:"modal-dialog",children:Object(j.jsxs)("div",{class:"modal-content",children:[Object(j.jsxs)("div",{class:"modal-header",style:{color:"white",backgroundColor:"black"},children:[Object(j.jsx)("h5",{class:"modal-title",id:"exampleModalLabel",children:Object(j.jsxs)("b",{children:["About ",null===(r=e.user)||void 0===r?void 0:r.name]})}),Object(j.jsx)("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})]}),Object(j.jsx)("div",{class:"modal-body",children:Object(j.jsxs)("form",{onSubmit:U,children:[Object(j.jsxs)("div",{class:"mb-3",children:[Object(j.jsx)("label",{for:"city-name",class:"col-form-label",children:Object(j.jsx)("b",{children:"City:"})}),Object(j.jsx)("input",{type:"text",class:"form-control",id:"city-name",value:A,onChange:function(e){return B(e.target.value)}})]}),Object(j.jsxs)("div",{class:"mb-3",children:[Object(j.jsx)("label",{for:"from",class:"col-form-label",children:Object(j.jsx)("b",{children:"From:"})}),Object(j.jsx)("input",{type:"text",class:"form-control",id:"from",value:M,onChange:function(e){return T(e.target.value)}})]}),Object(j.jsxs)("div",{class:"mb-3",children:[Object(j.jsx)("label",{for:"relation",class:"col-form-label",children:Object(j.jsx)("b",{children:"Relationship:"})}),Object(j.jsx)("input",{type:"text",class:"form-control",id:"relation",value:G,onChange:function(e){return q(e.target.value)}})]}),Object(j.jsxs)("div",{class:"mb-3",children:[Object(j.jsx)("label",{for:"desc",class:"col-form-label",children:Object(j.jsx)("b",{children:"Description:"})}),Object(j.jsx)("input",{type:"text",class:"form-control",id:"desc",value:V,onChange:function(e){return X(e.target.value)}})]}),Object(j.jsxs)("div",{class:"modal-footer",children:[Object(j.jsx)("button",{type:"button",class:"btn btn-secondary","data-bs-dismiss":"modal",children:"Close"}),Object(j.jsx)("button",{class:"btn btn-primary","data-bs-dismiss":"modal",type:"submit",children:"Save changes"})]})]})})]})})}),Object(j.jsxs)("ul",{children:[Object(j.jsxs)("li",{children:[Object(j.jsx)("b",{children:"City:"})," ",(null===(u=e.user)||void 0===u?void 0:u.city)?null===(b=e.user)||void 0===b?void 0:b.city:"Unknown"]}),Object(j.jsxs)("li",{children:[Object(j.jsx)("b",{children:"From:"})," ",(null===(h=e.user)||void 0===h?void 0:h.from)?null===(p=e.user)||void 0===p?void 0:p.from:"Unknown"]}),Object(j.jsxs)("li",{children:[Object(j.jsx)("b",{children:"Relationship Status:"})," ",(null===(f=e.user)||void 0===f?void 0:f.relationship)?(null===(O=e.user)||void 0===O?void 0:O.relationship.length)>20?null===(m=e.user)||void 0===m?void 0:m.relationship.slice(0,20):null===(g=e.user)||void 0===g?void 0:g.relationship:"Unknown"]})]})]}),Object(j.jsx)("hr",{}),Object(j.jsx)("strong",{style:{fontSize:"30px"},children:"Friends"}),null!==I?I.map((function(e){return Object(j.jsx)("li",{children:Object(j.jsx)(P,{id:e})})})):Object(j.jsx)("div",{children:"No friends added"})]})]})}var A=s.p+"static/media/cover.aa52ea16.jpg";function B(e){var t,s,i,c,l,r,o,d=Object(n.useContext)(v).user,u=Object(n.useState)(null),b=Object(a.a)(u,2),h=b[0],p=b[1],O=Object(n.useState)(null),g=Object(a.a)(O,2),y=g[0],w=g[1],k=Object(m.g)();return Object(j.jsxs)(j.Fragment,{children:[Object(j.jsxs)("div",{className:"dp",children:[Object(j.jsx)("div",{style:{display:"flex",justifyContent:"center",height:"85%",backgroundColor:"#535151"},className:"dp",children:Object(j.jsx)("img",{style:{maxWidth:"100%",height:"100%"},src:(null===(t=e.user)||void 0===t?void 0:t.coverPicture)?null===(s=e.user)||void 0===s?void 0:s.coverPicture:A,alt:""})}),Object(j.jsx)("div",{style:{display:"flex",justifyContent:"center",position:"relative",top:"-14vw"},children:Object(j.jsx)("div",{style:{height:"20vw",width:"20vw",display:"flex",justifyContent:"center",alignItems:"center",border:"solid white 3px",backgroundColor:"black",overflow:"hidden"},class:"avatar rounded-circle",children:Object(j.jsx)("img",{src:(null===(i=e.user)||void 0===i?void 0:i.profilePicture)?null===(c=e.user)||void 0===c?void 0:c.profilePicture:f,alt:"",style:{maxHeight:"100%",maxWidth:"100%"}})})}),Object(j.jsx)("strong",{style:{display:"flex",justifyContent:"center",position:"relative",top:"-13vw",width:"100%"},children:null===(l=e.user)||void 0===l?void 0:l.name})]}),Object(j.jsx)("div",{className:"dp1",children:Object(j.jsx)("strong",{style:{display:"flex",justifyContent:"center",width:"100%",textAlign:"center"},children:null===(r=e.user)||void 0===r?void 0:r.desc})}),Object(j.jsxs)("div",{style:{display:(null===d||void 0===d?void 0:d._id)!==(null===(o=e.user)||void 0===o?void 0:o._id)?"none":""},className:"padding",children:[Object(j.jsxs)("div",{type:"button","data-bs-toggle":"modal","data-bs-target":"#exampleModal",children:[Object(j.jsx)("i",{class:"fas fa-camera fa-2x"}),Object(j.jsx)("b",{children:" Update profile picture"})]}),Object(j.jsx)("div",{class:"modal fade",id:"exampleModal",tabindex:"-1","aria-labelledby":"exampleModalLabel","aria-hidden":"true",children:Object(j.jsx)("div",{class:"modal-dialog",children:Object(j.jsxs)("div",{class:"modal-content",children:[Object(j.jsxs)("div",{class:"modal-header",style:{color:"white",backgroundColor:"black"},children:[Object(j.jsx)("h5",{class:"modal-title",id:"exampleModalLabel",children:Object(j.jsx)("b",{children:"Upload profile picture"})}),Object(j.jsx)("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})]}),Object(j.jsx)("div",{class:"modal-body",children:Object(j.jsxs)("form",{onSubmit:function(t){t.preventDefault(),e.progress(10);var s=R.ref("images/".concat(null===h||void 0===h?void 0:h.name)).put(h);e.progress(30),s.on("state_changed",(function(e){}),(function(e){console.log(e)}),(function(){R.ref("images").child(null===h||void 0===h?void 0:h.name).getDownloadURL().then((function(t){var s;e.progress(70),x.a.put("http://localhost:5000/api/users/".concat(null===(s=e.user)||void 0===s?void 0:s._id),{profilePicture:t}).then(e.progress(100),k.push("/"))}))}))},children:[Object(j.jsxs)("div",{class:"mb-3",children:[Object(j.jsx)("label",{htmlFor:"file"}),Object(j.jsx)("input",{id:"file",type:"file",onChange:function(e){e.target.files[0]&&p(e.target.files[0])}})]}),Object(j.jsxs)("div",{class:"modal-footer",children:[Object(j.jsx)("button",{type:"button",class:"btn btn-secondary","data-bs-dismiss":"modal",children:"Close"}),Object(j.jsx)("button",{className:"btn btn-primary","data-bs-dismiss":"modal",type:"submit",disabled:null===h?"true":"",children:"Upload"})]})]})})]})})}),Object(j.jsxs)("div",{type:"button","data-bs-toggle":"modal","data-bs-target":"#exampleModal1",children:[Object(j.jsx)("i",{class:"fas fa-camera fa-2x"}),Object(j.jsx)("b",{children:" Update cover picture"})]}),Object(j.jsx)("div",{class:"modal fade",id:"exampleModal1",tabindex:"-1","aria-labelledby":"exampleModalLabel","aria-hidden":"true",children:Object(j.jsx)("div",{class:"modal-dialog",children:Object(j.jsxs)("div",{class:"modal-content",children:[Object(j.jsxs)("div",{class:"modal-header",style:{color:"white",backgroundColor:"black"},children:[Object(j.jsx)("h5",{class:"modal-title",id:"exampleModalLabel",children:Object(j.jsx)("b",{children:"Upload cover picture"})}),Object(j.jsx)("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})]}),Object(j.jsx)("div",{class:"modal-body",children:Object(j.jsxs)("form",{onSubmit:function(t){t.preventDefault(),e.progress(10);var s=R.ref("images/".concat(null===y||void 0===y?void 0:y.name)).put(y);e.progress(30),s.on("state_changed",(function(e){}),(function(e){console.log(e)}),(function(){R.ref("images").child(null===y||void 0===y?void 0:y.name).getDownloadURL().then((function(t){var s;e.progress(70),x.a.put("http://localhost:5000/api/users/".concat(null===(s=e.user)||void 0===s?void 0:s._id),{coverPicture:t}).then(e.progress(100),k.push("/"))}))}))},children:[Object(j.jsxs)("div",{class:"mb-3",children:[Object(j.jsx)("label",{htmlFor:"file1"}),Object(j.jsx)("input",{id:"file1",type:"file",onChange:function(e){e.target.files[0]&&w(e.target.files[0])}})]}),Object(j.jsxs)("div",{class:"modal-footer",children:[Object(j.jsx)("button",{type:"button",class:"btn btn-secondary","data-bs-dismiss":"modal",children:"Close"}),Object(j.jsx)("button",{className:"btn btn-primary","data-bs-dismiss":"modal",type:"submit",disabled:null===y?"true":"",children:"Upload"})]})]})})]})})})]})]})}function z(e){var t,s,i=Object(n.useContext)(v).user,c=Object(n.useState)(null),l=Object(a.a)(c,2),r=l[0],u=l[1];return Object(n.useEffect)((function(){var t=function(){var t=Object(d.a)(o.a.mark((function t(){var s,n;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,x.a.get("http://localhost:5000/api/posts/all/".concat(null===(s=e.user)||void 0===s?void 0:s._id));case 3:n=t.sent,u(n.data.sort((function(e,t){return new Date(t.createdAt)-new Date(e.createdAt)}))),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),console.log(t.t0);case 10:case"end":return t.stop()}}),t,null,[[0,7]])})));return function(){return t.apply(this,arguments)}}();t()}),[e.user]),Object(j.jsx)(j.Fragment,{children:(null===i||void 0===i?void 0:i._id)===(null===(t=e.user)||void 0===t?void 0:t._id)||(null===(s=e.user)||void 0===s?void 0:s.followers.includes(null===i||void 0===i?void 0:i._id))?Object(j.jsx)("div",{children:0!==(null===r||void 0===r?void 0:r.length)?Object(j.jsx)(j.Fragment,{children:null===r||void 0===r?void 0:r.map((function(e){return Object(j.jsx)(y,{post:e})}))}):Object(j.jsxs)(j.Fragment,{children:[Object(j.jsx)("div",{style:{display:"flex",justifyContent:"center"},children:Object(j.jsx)("b",{style:{fontSize:"35px",textAlign:"center"},children:"Nothing to Show"})}),Object(j.jsx)("div",{style:{display:"flex",justifyContent:"center"},children:Object(j.jsx)("i",{class:"fas fa-camera fa-9x"})})]})}):Object(j.jsxs)(j.Fragment,{children:[Object(j.jsx)("div",{style:{display:"flex",justifyContent:"center"},children:Object(j.jsx)("b",{style:{fontSize:"35px",textAlign:"center"},children:"Follow to see posts"})}),Object(j.jsx)("div",{style:{display:"flex",justifyContent:"center"},children:Object(j.jsx)("i",{class:"fas fa-camera-retro fa-9x"})})]})})}function D(e){var t=Object(n.useState)(null),s=Object(a.a)(t,2),i=s[0],c=s[1],l=Object(n.useContext)(v).user,r=Object(m.h)().username;return Object(n.useEffect)((function(){var e=function(){var e=Object(d.a)(o.a.mark((function e(){var t;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,x.a.get("http://localhost:5000/api/users/name/".concat(r));case 2:t=e.sent,c(t.data);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();e(),window.scrollTo(0,0)}),[r]),Object(j.jsx)(j.Fragment,{children:null!==i&&null!==l?Object(j.jsxs)(j.Fragment,{children:[Object(j.jsx)(k,{}),Object(j.jsx)("div",{className:"d-flex",children:Object(j.jsxs)("div",{style:{position:"relative",top:"57px",left:"1vw"},children:[Object(j.jsx)(B,{user:i,progress:e.progress}),Object(j.jsx)(L,{user:i,progress:e.progress}),Object(j.jsxs)("div",{className:"d-flex",children:[Object(j.jsx)("div",{className:"top",style:{paddingTop:"5px"},children:Object(j.jsx)(z,{user:i})}),Object(j.jsx)("div",{style:{position:"relative",top:"10px",left:"1vw"},children:Object(j.jsx)(E,{user:i})})]})]})})]}):Object(j.jsx)("div",{})})}var M=function(){var e=Object(d.a)(o.a.mark((function e(t,s){var n;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s({type:"LOGIN_START"}),e.prev=1,e.next=4,x.a.post("http://localhost:5000/api/auth/login",t);case 4:n=e.sent,s({type:"LOGIN_SUCCESS",payload:n.data.user}),sessionStorage.setItem("token",n.data.token),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(1),s({type:"LOGIN_FAILURE",payload:e.t0});case 12:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(t,s){return e.apply(this,arguments)}}(),T=s(117);function W(){var e=Object(n.useRef)(),t=Object(n.useRef)(),s=Object(n.useContext)(v),i=(s.user,s.isFetching),c=(s.error,s.dispatch);return Object(j.jsxs)("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",height:"100vh",backgroundColor:"rgb(198 195 195)"},children:[Object(j.jsxs)("div",{className:"responsive",children:[Object(j.jsx)("strong",{style:{fontSize:"70px"},children:Object(j.jsx)("span",{className:"badge bg-primary",children:"Smart-Chats"})}),Object(j.jsx)("p",{style:{fontSize:"25px",width:"25vw"},children:Object(j.jsx)("b",{children:" Connect with friends around world and chat with them."})})]}),Object(j.jsx)("div",{className:"w1",style:{backgroundColor:"white",position:"relative",left:"1vw",border:"solid #fcfaf8 1px",borderRadius:"10px"},children:Object(j.jsxs)("form",{action:"",className:"w1",style:{position:"relative",paddingBottom:"90px"},onSubmit:function(s){s.preventDefault(),M({email:e.current.value,password:t.current.value},c)},children:[Object(j.jsx)("input",{type:"email",required:!0,style:{width:"90%",height:" 50px ",position:"relative",top:"15px",borderRadius:"10px",border:"solid #cfc9c9 2px"},placeholder:"Email",ref:e}),Object(j.jsx)("input",{type:"password",required:!0,style:{width:"90%",height:" 50px ",position:"relative",top:"30px",borderRadius:"10px",border:"solid #cfc9c9 2px"},minLength:"6",placeholder:"Password",ref:t}),Object(j.jsx)("div",{style:{width:"90%",height:"25px"},children:Object(j.jsx)("p",{style:{display:"flex",justifyContent:"center",position:"relative",top:"45px",color:"#1877f2"},children:Object(j.jsx)("b",{children:"Forgot Password?"})})}),Object(j.jsx)("button",{className:"btn btn-primary",type:"submit",style:{width:"90%",height:" 50px ",position:"relative",top:"60px",borderRadius:"10px"},children:Object(j.jsx)("b",{children:i?Object(j.jsx)(T.a,{color:"inherit",size:"4vh"}):"Log In"})}),Object(j.jsx)("div",{style:{width:"90%",display:"flex",justifyContent:"center",position:"relative",top:"75px",textAlign:"center"},children:Object(j.jsxs)("b",{children:["Don't have an account?",Object(j.jsx)(g.b,{to:"/signup",children:"Create Account"})]})})]})})]})}function H(){var e=Object(n.useRef)(),t=Object(n.useRef)(),s=Object(n.useRef)(),i=Object(n.useRef)(),c=Object(m.g)(),l=function(){var n=Object(d.a)(o.a.mark((function n(l){var a;return o.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(l.preventDefault(),s.current.value===i.current.value){n.next=5;break}s.current.setCustomValidity("Passwords don't match"),n.next=15;break;case 5:return a={name:e.current.value,email:t.current.value,password:s.current.value,cpassword:i.current.value},n.prev=6,n.next=9,x.a.post("http://localhost:5000/api/auth",a);case 9:c.push("/login"),n.next=15;break;case 12:n.prev=12,n.t0=n.catch(6),console.log(n.t0);case 15:case"end":return n.stop()}}),n,null,[[6,12]])})));return function(e){return n.apply(this,arguments)}}();return Object(j.jsxs)("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",height:"100vh",backgroundColor:"rgb(198 195 195)"},children:[Object(j.jsxs)("div",{className:"responsive",children:[Object(j.jsx)("strong",{style:{fontSize:"70px"},children:Object(j.jsx)("span",{className:"badge bg-primary",children:"Smart-Chats"})}),Object(j.jsx)("p",{style:{fontSize:"25px",width:"25vw"},children:Object(j.jsx)("b",{children:" Connect with friends around world and chat with them."})})]}),Object(j.jsx)("div",{className:"w1",style:{backgroundColor:"white",position:"relative",left:"1vw",border:"solid #fcfaf8 1px",borderRadius:"10px"},children:Object(j.jsxs)("form",{action:"",className:"w1",style:{position:"relative",paddingBottom:"90px"},onSubmit:l,children:[Object(j.jsx)("input",{type:"text",style:{width:"90%",height:"50px",position:"relative",top:"15px",borderRadius:"10px",border:"solid #cfc9c9 2px"},placeholder:"Username without space",pattern:"^\\S+$",required:!0,ref:e}),Object(j.jsx)("input",{type:"email",style:{width:"90%",height:" 50px ",position:"relative",top:"30px",borderRadius:"10px",border:"solid #cfc9c9 2px"},placeholder:"Email",required:!0,ref:t}),Object(j.jsx)("input",{type:"password",style:{width:"90%",height:"50px",position:"relative",top:"45px",borderRadius:"10px",border:"solid #cfc9c9 2px"},placeholder:"Password",required:!0,ref:s,minLength:"6"}),Object(j.jsx)("input",{type:"password",style:{width:"90%",height:"50px",position:"relative",top:"60px",borderRadius:"10px",border:"solid #cfc9c9 2px"},placeholder:"Confirm Password",required:!0,ref:i,minLength:"6"}),Object(j.jsx)("button",{className:"btn btn-primary",style:{width:"90%",height:"50px",position:"relative",top:"75px",borderRadius:"10px"},type:"submit",children:Object(j.jsx)("b",{children:"Sign Up"})}),Object(j.jsx)("div",{style:{width:"90%",height:"50px",display:"flex",justifyContent:"center",position:"relative",top:"90px",textAlign:"center"},children:Object(j.jsxs)("b",{children:["Already have an account?",Object(j.jsx)(g.b,{to:"/login",children:"Log In"})]})})]})})]})}function G(e){var t=Object(n.useState)(null),s=Object(a.a)(t,2),i=s[0],c=s[1];return Object(n.useEffect)((function(){var t=function(){var t=Object(d.a)(o.a.mark((function t(){var s;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,x.a.get("http://localhost:5000/api/users/".concat(e.conversation));case 2:s=t.sent,c(s.data);case 4:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();t()}),[]),Object(j.jsxs)("div",{className:"d-flex align-items-center nav-link link-dark text-decoration-none",style:{cursor:"pointer"},children:[Object(j.jsx)("img",{src:(null===i||void 0===i?void 0:i.profilePicture)?null===i||void 0===i?void 0:i.profilePicture:f,alt:"",width:32,height:32,className:"rounded-circle me-2"}),Object(j.jsx)("strong",{children:null===i||void 0===i?void 0:i.name})]})}function q(e){var t=Object(n.useState)(null),s=Object(a.a)(t,2),i=s[0],c=s[1];Object(n.useEffect)((function(){var t=function(){var t=Object(d.a)(o.a.mark((function t(){var s;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,x.a.get("http://localhost:5000/api/users/".concat(e.msg.sender));case 2:s=t.sent,c(s.data);case 4:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();t()}),[e.msg.sender]);var l=Object(n.useContext)(v).user;return Object(j.jsxs)("div",{className:l._id===e.msg.sender?"mine":"other",style:{display:"block"},children:[Object(j.jsxs)("div",{style:{display:"flex"},children:[Object(j.jsx)("img",{src:(null===i||void 0===i?void 0:i.profilePicture)?null===i||void 0===i?void 0:i.profilePicture:f,alt:"",width:32,height:32,className:"rounded-circle me-2"}),Object(j.jsx)("div",{className:"chat",style:{height:"100%",backgroundColor:l._id!==e.msg.sender?"#afb4b8":"#0d6efd",color:l._id!==e.msg.sender?"black":"white",borderRadius:"25px"},children:Object(j.jsx)("p",{style:{position:"relative",top:"6px",left:"13px",width:"85%"},children:e.msg.text})})]}),Object(j.jsx)("small",{style:{position:"relative",left:"2.5vw"},children:Object(O.a)(e.msg.createdAt)})]})}var J=s(66);function K(){var e=Object(n.useState)(null),t=Object(a.a)(e,2),s=t[0],i=t[1],c=Object(n.useContext)(v).user,l=Object(n.useRef)(),r=Object(n.useRef)(),u=Object(n.useState)(null),b=Object(a.a)(u,2),h=(b[0],b[1]),p=Object(n.useState)(""),O=Object(a.a)(p,2),m=O[0],g=O[1],y=Object(n.useState)(null),w=Object(a.a)(y,2),C=w[0],S=w[1],_=Object(n.useState)(null),I=Object(a.a)(_,2),F=I[0],R=I[1],U=Object(n.useState)(null),L=Object(a.a)(U,2),P=L[0],E=L[1],A=Object(n.useState)(null),B=Object(a.a)(A,2),z=B[0],D=B[1],M=Object(n.useState)([]),T=Object(a.a)(M,2),W=T[0],H=T[1];Object(n.useEffect)((function(){l.current=Object(J.a)("ws://localhost:8800"),l.current.on("getMessage",(function(e){E({sender:e.senderId,text:e.text,createdAt:Date.now()})}))}),[]),Object(n.useEffect)((function(){var e;l.current.emit("addUser",null===c||void 0===c?void 0:c._id);var t=null===c||void 0===c?void 0:c.following;0!==(null===(e=t=(null===c||void 0===c?void 0:c.following)?t.concat(null===c||void 0===c?void 0:c.followers.filter((function(e){return!(null===c||void 0===c?void 0:c.following.includes(e))}))):null===c||void 0===c?void 0:c.followers)||void 0===e?void 0:e.length)&&i(t)}),[c]),Object(n.useEffect)((function(){l.current.on("getUser",(function(e){H(null===s||void 0===s?void 0:s.filter((function(t){return e.some((function(e){return e.userId===t}))})))}))}),[s]),Object(n.useEffect)((function(){P&&(null===C||void 0===C?void 0:C.members.includes(P.sender))&&D(P)}),[P,C]),Object(n.useEffect)((function(){var e=function(){var e=Object(d.a)(o.a.mark((function e(){var t;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,x.a.get("http://localhost:5000/api/conversation/".concat(null===c||void 0===c?void 0:c._id));case 2:t=e.sent,h(t.data);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();e()}),[null===c||void 0===c?void 0:c._id]);var K=Object(n.useState)(null),V=Object(a.a)(K,2),X=V[0],Y=V[1];Object(n.useEffect)((function(){var e=function(){var e=Object(d.a)(o.a.mark((function e(){var t,s;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=null===C||void 0===C?void 0:C.members.find((function(e){return e!==c._id})),e.next=3,x.a.get("http://localhost:5000/api/users/".concat(t));case 3:s=e.sent,Y(s.data);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();e()}),[C]);var Z=function(){var e=Object(d.a)(o.a.mark((function e(){var t,s;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=C.members.find((function(e){return e!==c._id})),console.log(t),l.current.emit("sendMessage",{senderId:c._id,receiverId:t,text:m}),e.next=5,x.a.post("http://localhost:5000/api/messages",{conversationId:C._id,sender:c._id,text:m});case 5:s=e.sent,D(s.data),g("");case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();Object(n.useEffect)((function(){var e=function(){var e=Object(d.a)(o.a.mark((function e(){var t;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,x.a.get("http://localhost:5000/api/messages/".concat(null===C||void 0===C?void 0:C._id));case 2:t=e.sent,R(t.data);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();e()}),[C,z]),Object(n.useEffect)((function(){var e;null===(e=r.current)||void 0===e||e.scrollIntoView({behavior:"smooth",block:"end"})}),[F]);var $=function(){var e=Object(d.a)(o.a.mark((function e(t){var s;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,x.a.get("http://localhost:5000/api/conversation/".concat(t,"/").concat(c._id));case 2:s=e.sent,S(s.data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Q=function(){var e=Object(d.a)(o.a.mark((function e(t){var s,n;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,x.a.get("http://localhost:5000/api/conversation/".concat(t,"/").concat(c._id));case 2:if("no convo"===(s=e.sent).data){e.next=7;break}S(s.data),e.next=15;break;case 7:return e.next=9,x.a.post("http://localhost:5000/api/conversation",{senderId:c._id,receiverId:t});case 9:if(!e.sent.data){e.next=15;break}return e.next=13,x.a.get("http://localhost:5000/api/conversation/".concat(t,"/").concat(c._id));case 13:n=e.sent,S(n.data);case 15:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(j.jsxs)(j.Fragment,{children:[Object(j.jsx)(k,{}),Object(j.jsxs)("div",{className:"d-flex",style:{overflowX:"hidden",overflowY:"hidden"},children:[Object(j.jsxs)("div",{className:"p-3 bg-light bar",style:{position:"relative",top:"57px"},children:[Object(j.jsx)("strong",{style:{fontSize:"25px"},children:"Conversations"}),Object(j.jsx)("hr",{}),Object(j.jsx)("ul",{className:"nav nav-pills flex-column mb-auto",children:s?s.map((function(e){return Object(j.jsx)("li",{onClick:function(){return Q(e)},children:Object(j.jsx)(G,{conversation:e})})})):Object(j.jsx)("div",{children:Object(j.jsx)("b",{children:"Add friends to start conversation"})})})]}),Object(j.jsx)("div",{className:"midmessage",style:{position:"relative",top:"57px",left:"2vw"},children:Object(j.jsx)("div",{className:"card mb-3",style:{height:"97.8vh"},children:Object(j.jsx)("div",{className:"card-body",children:C?Object(j.jsxs)(j.Fragment,{children:[Object(j.jsxs)("div",{style:{height:"5vh",display:"flex",alignItems:"center",justifyContent:"space-between"},children:[Object(j.jsxs)("div",{children:[Object(j.jsx)("img",{src:(null===X||void 0===X?void 0:X.profilePicture)?null===X||void 0===X?void 0:X.profilePicture:f,alt:"",width:32,height:32,className:"rounded-circle me-2"}),Object(j.jsx)("strong",{children:null===X||void 0===X?void 0:X.name})]}),Object(j.jsxs)("div",{children:[Object(j.jsx)("div",{className:"arrow",style:{cursor:"pointer",paddingRight:"20px"},type:"button","data-bs-toggle":"modal","data-bs-target":"#staticBackdrop",children:Object(j.jsx)("i",{class:"fas fa-arrow-down"})}),Object(j.jsx)("div",{className:"online",style:{cursor:"pointer"},type:"button","data-bs-toggle":"modal","data-bs-target":"#staticBackdrop1",children:Object(j.jsx)("i",{class:"fas fa-blog"})})]}),Object(j.jsx)("div",{class:"modal fade",id:"staticBackdrop","data-bs-backdrop":"static","data-bs-keyboard":"false",tabindex:"-1","aria-labelledby":"staticBackdropLabel","aria-hidden":"true",children:Object(j.jsx)("div",{class:"modal-dialog",children:Object(j.jsxs)("div",{class:"modal-content",children:[Object(j.jsxs)("div",{class:"modal-header",style:{color:"white",backgroundColor:"black"},children:[Object(j.jsx)("h5",{class:"modal-title",id:"staticBackdropLabel",children:Object(j.jsx)("b",{children:"Converations"})}),Object(j.jsx)("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})]}),Object(j.jsx)("div",{class:"modal-body",children:Object(j.jsx)("ul",{className:"nav nav-pills flex-column mb-auto",children:s?s.map((function(e){return Object(j.jsx)("li",{"data-bs-dismiss":"modal",onClick:function(){return Q(e)},children:Object(j.jsx)(G,{conversation:e})})})):Object(j.jsx)("div",{children:Object(j.jsx)("b",{children:"Add friends to start conversation"})})})}),Object(j.jsx)("div",{class:"modal-footer",children:Object(j.jsx)("button",{type:"button",class:"btn btn-secondary","data-bs-dismiss":"modal",children:"Close"})})]})})}),Object(j.jsx)("div",{class:"modal fade",id:"staticBackdrop1","data-bs-backdrop":"static","data-bs-keyboard":"false",tabindex:"-1","aria-labelledby":"staticBackdropLabel","aria-hidden":"true",children:Object(j.jsx)("div",{class:"modal-dialog",children:Object(j.jsxs)("div",{class:"modal-content",children:[Object(j.jsxs)("div",{class:"modal-header",style:{color:"white",backgroundColor:"black"},children:[Object(j.jsx)("h5",{class:"modal-title",id:"staticBackdropLabel",children:Object(j.jsx)("b",{children:"Online Users"})}),Object(j.jsx)("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})]}),Object(j.jsx)("div",{class:"modal-body",children:Object(j.jsx)("ul",{className:"nav nav-pills flex-column mb-auto",children:W&&0!==W.length?W.map((function(e){return Object(j.jsx)("li",{"data-bs-dismiss":"modal",onClick:function(){return $(e)},style:{cursor:"pointer"},children:Object(j.jsx)(N,{id:e})})})):Object(j.jsx)("div",{children:Object(j.jsx)("b",{children:"No one is online"})})})}),Object(j.jsx)("div",{class:"modal-footer",children:Object(j.jsx)("button",{type:"button",class:"btn btn-secondary","data-bs-dismiss":"modal",children:"Close"})})]})})})]}),Object(j.jsx)("hr",{}),Object(j.jsx)("div",{className:"textheight",style:{overflowY:"scroll",overflowX:"hidden"},children:Object(j.jsx)("div",{ref:r,children:F&&F.map((function(e){return Object(j.jsx)(q,{msg:e})}))})}),Object(j.jsxs)("div",{style:{display:"flex",position:"absolute",bottom:"50px",width:"100%"},children:[Object(j.jsx)("textarea",{className:"textwidth",placeholder:"Write something....",style:{resize:"none",height:"20vh",borderRadius:"5px"},value:m,onChange:function(e){return g(e.target.value)}}),Object(j.jsx)("button",{type:"button",className:"btn btn-success buttonwidth",style:{height:"40px",position:"relative",left:"3px"},disabled:""===m?"true":"",onClick:Z,children:"Send"})]})]}):Object(j.jsxs)(j.Fragment,{children:[Object(j.jsx)("div",{className:"arrow",style:{cursor:"pointer"},type:"button","data-bs-toggle":"modal","data-bs-target":"#staticBackdrop",children:Object(j.jsx)("i",{class:"fas fa-arrow-down"})}),Object(j.jsx)("div",{class:"modal fade",id:"staticBackdrop","data-bs-backdrop":"static","data-bs-keyboard":"false",tabindex:"-1","aria-labelledby":"staticBackdropLabel","aria-hidden":"true",children:Object(j.jsx)("div",{class:"modal-dialog",children:Object(j.jsxs)("div",{class:"modal-content",children:[Object(j.jsxs)("div",{class:"modal-header",style:{color:"white",backgroundColor:"black"},children:[Object(j.jsx)("h5",{class:"modal-title",id:"staticBackdropLabel",children:Object(j.jsx)("b",{children:"Coverations"})}),Object(j.jsx)("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})]}),Object(j.jsx)("div",{class:"modal-body",children:Object(j.jsx)("ul",{className:"nav nav-pills flex-column mb-auto",children:s?s.map((function(e){return Object(j.jsx)("li",{"data-bs-dismiss":"modal",onClick:function(){return Q(e)},children:Object(j.jsx)(G,{conversation:e})})})):Object(j.jsx)("div",{children:Object(j.jsx)("b",{children:"Add friends to start conversation"})})})}),Object(j.jsx)("div",{class:"modal-footer",children:Object(j.jsx)("button",{type:"button",class:"btn btn-secondary","data-bs-dismiss":"modal",children:"Close"})})]})})}),Object(j.jsx)("div",{style:{fontSize:"40px",textAlign:"center",display:"flex",justifyContent:"center",alignItems:"center",height:"85vh"},children:Object(j.jsx)("strong",{children:"Open a conversation to start chat"})})]})})})}),Object(j.jsxs)("div",{className:"tar",style:{position:"relative",top:"65px",left:"4vw",width:"22vw"},children:[Object(j.jsx)("strong",{style:{fontSize:"30px"},children:"Online friends"}),Object(j.jsxs)("ul",{className:"nav nav-pills flex-column mb-auto",children:[Object(j.jsx)("hr",{}),W&&0!==W.length?W.map((function(e){return Object(j.jsx)("li",{onClick:function(){return $(e)},style:{cursor:"pointer"},children:Object(j.jsx)(N,{id:e})})})):Object(j.jsx)("div",{children:Object(j.jsx)("b",{children:"No one is online"})})]})]})]})]})}var V=s(65);function X(){var e=Object(n.useState)(null),t=Object(a.a)(e,2),s=t[0],i=t[1],c=Object(m.h)().username,l=Object(n.useContext)(v).user;return Object(n.useEffect)((function(){var e=function(){var e=Object(d.a)(o.a.mark((function e(){var t,s;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,x.a.get("http://localhost:5000/api/users/");case 2:t=e.sent,s=t.data.filter((function(e){return e.name.includes(c)})),i(s);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();e()}),[c]),Object(j.jsx)(j.Fragment,{children:null!==l&&null!=s?Object(j.jsxs)(j.Fragment,{children:[Object(j.jsx)(k,{}),Object(j.jsx)("div",{className:"container",style:{position:"relative",top:"57px",width:"85vw"},children:0!==s.length?Object(j.jsx)(j.Fragment,{children:Object(j.jsx)("ul",{className:"nav nav-pills flex-column mb-auto py-2",children:s.map((function(e){return Object(j.jsx)("li",{className:"nav-link link-dark text-decoration-none",style:{listStyle:"none"},children:Object(j.jsxs)("div",{className:"card-body d-flex",children:[Object(j.jsx)(g.b,{to:"/profile/".concat(null===e||void 0===e?void 0:e.name),children:Object(j.jsx)("div",{style:{height:"15vw",width:"15vw",display:"flex",justifyContent:"center",alignItems:"center",border:"solid white 3px",backgroundColor:"black",overflow:"hidden"},class:"avatar rounded-circle",children:Object(j.jsx)("img",{src:(null===e||void 0===e?void 0:e.profilePicture)?null===e||void 0===e?void 0:e.profilePicture:f,alt:"",style:{maxHeight:"100%",maxWidth:"100%"}})})}),Object(j.jsx)("div",{style:{width:"100%",height:"15vw",position:"relative",display:"flex",alignItems:"center"},children:Object(j.jsxs)("ul",{style:{listStyle:"none",fontSize:"2vw"},children:[Object(j.jsx)("li",{children:Object(j.jsx)("strong",{children:null===e||void 0===e?void 0:e.name})}),Object(j.jsxs)("li",{children:[Object(j.jsx)("b",{children:"City:"})," ",(null===e||void 0===e?void 0:e.city)?null===e||void 0===e?void 0:e.city:"Unknown"]}),Object(j.jsxs)("li",{children:[Object(j.jsx)("b",{children:"From:"})," ",(null===e||void 0===e?void 0:e.from)?null===e||void 0===e?void 0:e.from:"Unknown"]}),Object(j.jsxs)("li",{children:[Object(j.jsx)("b",{children:"Relationship Status:"})," ",(null===e||void 0===e?void 0:e.relationship)?null===e||void 0===e?void 0:e.relationship:"Unknown"]})]})})]})})}))})}):Object(j.jsx)("div",{style:{fontSize:"80px",display:"flex",justifyContent:"center",textAlign:"center"},children:"No results found"})})]}):Object(j.jsx)("div",{})})}var Y=function(){var e=Object(n.useContext)(v),t=e.user,s=e.dispatch,i=function(){var e=Object(d.a)(o.a.mark((function e(t){var n;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,x.a.get("http://localhost:5000/api/users/".concat(t));case 2:n=e.sent,s({type:"LOGIN_SUCCESS",payload:n.data}),console.log(n.data);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),c=Object(n.useState)(0),l=Object(a.a)(c,2),r=l[0],u=l[1],b=function(){var e=Object(d.a)(o.a.mark((function e(t){var s;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,x.a.get("http://localhost:5000/api/auth/verify",{headers:{token:t}});case 3:s=e.sent,i(s.data._id),console.log(s.data),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.log(e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t){return e.apply(this,arguments)}}();return Object(n.useEffect)((function(){sessionStorage.getItem("token")&&b(sessionStorage.getItem("token"))}),[]),Object(j.jsxs)(g.a,{children:[Object(j.jsx)(V.a,{color:"white",height:"3px",progress:r}),Object(j.jsxs)(m.d,{children:[Object(j.jsx)(m.b,{exact:!0,path:"/",children:t||sessionStorage.getItem("token")?Object(j.jsx)(I,{}):Object(j.jsx)(H,{})}),Object(j.jsx)(m.b,{exact:!0,path:"/messenger",children:t||sessionStorage.getItem("token")?Object(j.jsx)(K,{}):Object(j.jsx)(H,{})}),Object(j.jsx)(m.b,{exact:!0,path:"/login",children:t||sessionStorage.getItem("token")?Object(j.jsx)(m.a,{to:"/"}):Object(j.jsx)(W,{})}),Object(j.jsx)(m.b,{exact:!0,path:"/signup",children:t||sessionStorage.getItem("token")?Object(j.jsx)(m.a,{to:"/"}):Object(j.jsx)(H,{})}),Object(j.jsx)(m.b,{exact:!0,path:"/profile/:username",children:t||sessionStorage.getItem("token")?Object(j.jsx)(D,{progress:u}):Object(j.jsx)(H,{})}),Object(j.jsx)(m.b,{exact:!0,path:"/search/:username",children:t||sessionStorage.getItem("token")?Object(j.jsx)(X,{}):Object(j.jsx)(H,{})})]})]})},Z=function(e){e&&e instanceof Function&&s.e(3).then(s.bind(null,119)).then((function(t){var s=t.getCLS,n=t.getFID,i=t.getFCP,c=t.getLCP,l=t.getTTFB;s(e),n(e),i(e),c(e),l(e)}))},$=s(118);l.a.render(Object(j.jsx)(i.a.StrictMode,{children:Object(j.jsx)($.a,{children:Object(j.jsx)(h,{children:Object(j.jsx)(Y,{})})})}),document.getElementById("root")),Z()},72:function(e,t,s){},74:function(e,t,s){},75:function(e,t,s){}},[[108,1,2]]]);
//# sourceMappingURL=main.81827d93.chunk.js.map