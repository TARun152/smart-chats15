(this["webpackJsonpsmart-chats"]=this["webpackJsonpsmart-chats"]||[]).push([[0],{115:function(e,t,s){"use strict";s.r(t);var n=s(1),i=s.n(n),c=s(62),a=s.n(c),l=(s(79),s(2)),r=s(3),o=s.n(r),d=s(5),u=(s(81),s(82),s(0)),j=Object(n.createContext)(),b=function(e){var t=e.children,s=Object(n.useState)({}),i=Object(l.a)(s,2),c=i[0],a=i[1],r=Object(n.useState)(""),o=Object(l.a)(r,2),d=o[0],b=o[1],h=Object(n.useState)(!1),v=Object(l.a)(h,2),p=v[0],x=v[1];return Object(u.jsx)(j.Provider,{value:{user:c,setuser:a,isFetching:p,setisFetching:x,token:d,settoken:b},children:t})};var h=s(4),v=s.n(h),p=s.p+"static/media/user.2fda6558.png",x=s(45),f=s(7),O=s(8);function m(e){var t,s=Object(n.useContext)(j).user,i=Object(n.useState)({}),c=Object(l.a)(i,2),a=c[0],r=c[1],b=Object(n.useState)(),h=Object(l.a)(b,2),m=h[0],g=h[1],y=Object(n.useState)(e.post.likes.length),w=Object(l.a)(y,2),k=w[0],C=w[1],S=Object(n.useState)(),N=Object(l.a)(S,2),_=N[0],I=N[1],F=Object(f.g)();console.log(e.post),Object(n.useEffect)((function(){g(e.post.likes.includes(null===s||void 0===s?void 0:s._id))}),[s]),Object(n.useEffect)((function(){I(m?"fas":"far")}),[m]),Object(n.useEffect)((function(){var t=function(){var t=Object(d.a)(o.a.mark((function t(){var s,n;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,v.a.get("https://smart-chat15.herokuapp.com/"+"api/users/".concat(null===(s=e.post)||void 0===s?void 0:s.userId));case 2:n=t.sent,r(n.data);case 4:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();t()}),[null===(t=e.post)||void 0===t?void 0:t.userId]);var P=function(){var t=Object(d.a)(o.a.mark((function t(){return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return C(m?k-1:k+1),I(m?"far":"fas"),g(!m),t.next=5,v.a.put("https://smart-chat15.herokuapp.com/"+"api/posts/".concat(e.post._id,"/like"),{userId:s._id});case 5:console.log(a._id),console.log(s._id);case 7:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),U=function(){var t=Object(d.a)(o.a.mark((function t(){return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!window.confirm("Are you sure,you want to delete this post??")){t.next=5;break}return t.next=3,v.a.delete("https://smart-chat15.herokuapp.com/"+"api/posts/".concat(e.post._id));case 3:"successfully deleted"===t.sent.data&&F.push("/");case 5:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();return Object(u.jsx)("div",{className:"card mb-3",style:{position:"relative",top:"8px"},children:Object(u.jsxs)("div",{className:"card-body",children:[Object(u.jsxs)("div",{className:"card-title d-flex justify-content-between",children:[Object(u.jsxs)("div",{children:[Object(u.jsx)(O.b,{to:"/profile/".concat(null===a||void 0===a?void 0:a.name),children:Object(u.jsx)("img",{src:(null===a||void 0===a?void 0:a.profilePicture)?null===a||void 0===a?void 0:a.profilePicture:p,alt:"",width:32,height:32,className:"rounded-circle me-2"})}),Object(u.jsx)("strong",{children:null===a||void 0===a?void 0:a.name}),Object(u.jsx)("small",{style:{position:"relative",left:"1.5vw"},children:Object(x.a)(e.post.createdAt)})]}),Object(u.jsx)("i",{style:{cursor:"pointer",display:(null===s||void 0===s?void 0:s._id)!==(null===a||void 0===a?void 0:a._id)||!1===e.bool?"none":""},onClick:U,class:"fas fa-trash"})]}),Object(u.jsx)("p",{children:Object(u.jsx)("strong",{children:e.post.desc})}),Object(u.jsx)("div",{style:{display:"flex",justifyContent:"center"},children:Object(u.jsx)("img",{style:{maxWidth:"100%"},src:e.post.img,alt:""})}),Object(u.jsxs)("div",{style:{position:"relative",top:"5px",display:"flex",alignItems:"center",paddingTop:"10px"},children:[Object(u.jsx)("i",{onClick:P,style:{cursor:"pointer"},className:"".concat(_," fa-heart fa-2x")}),Object(u.jsxs)("span",{style:{position:"relative",left:".6vw"},children:[k," likes"]})]})]})})}function g(){var e=Object(n.useContext)(j).user,t=Object(n.useState)([]),s=Object(l.a)(t,2),i=s[0],c=s[1],a=Object(n.useState)(null),r=Object(l.a)(a,2),b=r[0],h=r[1];return Object(n.useEffect)((function(){var t=function(){var t=Object(d.a)(o.a.mark((function t(){var s;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,v.a.get("https://smart-chat15.herokuapp.com/"+"api/posts/timeline/".concat(null===e||void 0===e?void 0:e._id));case 3:s=t.sent,h(s.data.sort((function(e,t){return new Date(t.createdAt)-new Date(e.createdAt)}))),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),console.log(t.t0);case 10:case"end":return t.stop()}}),t,null,[[0,7]])})));return function(){return t.apply(this,arguments)}}();t();var s=function(){var e=Object(d.a)(o.a.mark((function e(){var t;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v.a.get("https://smart-chat15.herokuapp.com/api/users/");case 2:t=e.sent,c(t.data);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();s()}),[e]),Object(u.jsx)("div",{children:0!==(null===b||void 0===b?void 0:b.length)?Object(u.jsx)(u.Fragment,{children:null===b||void 0===b?void 0:b.map((function(e){return Object(u.jsx)(m,{post:e,bool:!1})}))}):Object(u.jsxs)("div",{children:[Object(u.jsx)("div",{style:{textAlign:"center",paddingTop:"10px",paddingBottom:"10px"},children:Object(u.jsx)("h1",{children:Object(u.jsx)("b",{children:"Follow these people to see their post:-"})})}),Object(u.jsx)(u.Fragment,{children:Object(u.jsx)("ul",{className:"nav nav-pills flex-column mb-auto py-2",children:i.map((function(e){return Object(u.jsx)("li",{className:"nav-link link-dark text-decoration-none",children:Object(u.jsxs)("div",{className:"d-flex card-body",children:[Object(u.jsx)(O.b,{to:"/profile/".concat(null===e||void 0===e?void 0:e.name),children:Object(u.jsx)("div",{style:{height:"13vw",width:"13vw",display:"flex",justifyContent:"center",alignItems:"center",border:"solid white 3px",backgroundColor:"black",overflow:"hidden"},class:"avatar rounded-circle",children:Object(u.jsx)("img",{src:(null===e||void 0===e?void 0:e.profilePicture)?null===e||void 0===e?void 0:e.profilePicture:p,alt:"",style:{maxHeight:"100%",maxWidth:"100%"}})})}),Object(u.jsx)("div",{style:{width:"60%",height:"13vw",position:"relative",left:"3vw",display:"flex",alignItems:"center"},children:Object(u.jsxs)("ul",{style:{listStyle:"none",fontSize:"2vw"},children:[Object(u.jsx)("li",{children:Object(u.jsx)("strong",{children:null===e||void 0===e?void 0:e.name})}),Object(u.jsxs)("li",{children:[Object(u.jsx)("b",{children:"City:"})," ",(null===e||void 0===e?void 0:e.city)?null===e||void 0===e?void 0:e.city:"Unknown"]}),Object(u.jsxs)("li",{children:[Object(u.jsx)("b",{children:"From:"})," ",(null===e||void 0===e?void 0:e.from)?null===e||void 0===e?void 0:e.from:"Unknown"]}),Object(u.jsxs)("li",{children:[Object(u.jsx)("b",{children:"Relationship Status:"})," ",(null===e||void 0===e?void 0:e.relationship)?null===e||void 0===e?void 0:e.relationship:"Unknown"]})]})})]})})}))})})]})})}function y(){var e=Object(f.g)(),t=Object(n.useContext)(j),s=t.user,i=t.setuser,c=t.settoken,a=Object(n.useState)(""),r=Object(l.a)(a,2),b=r[0],h=r[1],x=function(){var t=Object(d.a)(o.a.mark((function t(s){var n;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return s.preventDefault(),t.next=3,v.a.get("https://smart-chat15.herokuapp.com/"+"api/users/find/".concat(b));case 3:n=t.sent,e.push("/search/".concat(b)),console.log(n.data);case 6:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();return Object(u.jsx)("div",{children:Object(u.jsx)("nav",{className:"navbar fixed-top navbar-expand-md navbar-dark",style:{backgroundColor:"#1877f2"},children:Object(u.jsxs)("div",{className:"container-fluid",children:[Object(u.jsxs)("div",{className:"navbar-brand",style:{display:"flex",alignItems:"center"},children:[Object(u.jsxs)("div",{class:"dropend",children:[Object(u.jsx)("img",{type:"button","data-bs-toggle":"dropdown","aria-expanded":"false",src:(null===s||void 0===s?void 0:s.profilePicture)?null===s||void 0===s?void 0:s.profilePicture:p,alt:"",width:32,height:32,className:"rounded-circle me-2 dropdown-toggle"}),Object(u.jsxs)("ul",{class:"dropdown-menu",children:[Object(u.jsx)("li",{children:Object(u.jsx)(O.b,{to:"/profile/".concat(null===s||void 0===s?void 0:s.name),class:"dropdown-item",children:Object(u.jsx)("b",{children:"Profile"})})}),Object(u.jsx)("li",{children:Object(u.jsx)(O.b,{className:"dropdown-item",to:"/messenger",children:Object(u.jsx)("b",{children:"Messages"})})}),Object(u.jsx)("li",{onClick:function(){sessionStorage.removeItem("token"),i({}),c(""),e.push("/login")},style:{cursor:"pointer"},class:"dropdown-item",children:Object(u.jsx)("b",{children:"Log out"})})]})]}),Object(u.jsx)("b",{children:"Smart-Chats"})]}),Object(u.jsx)("button",{className:"navbar-toggler",type:"button","data-bs-toggle":"collapse","data-bs-target":"#navbarSupportedContent","aria-controls":"navbarSupportedContent","aria-expanded":"false","aria-label":"Toggle navigation",children:Object(u.jsx)("span",{className:"navbar-toggler-icon"})}),Object(u.jsxs)("div",{className:"collapse navbar-collapse",id:"navbarSupportedContent",children:[Object(u.jsxs)("ul",{className:"navbar-nav me-auto mb-2 mb-md-0",children:[Object(u.jsx)("li",{className:"nav-item",children:Object(u.jsx)(O.b,{className:"nav-link active","aria-current":"page",to:"/",children:"Homepage"})}),Object(u.jsx)("li",{className:"nav-item hide",style:{alignItems:"center"},children:Object(u.jsx)(O.b,{to:"/messenger",children:Object(u.jsx)("i",{className:"fas fa-comment-alt nav-link active"})})})]}),Object(u.jsxs)("form",{className:"d-flex",onSubmit:x,children:[Object(u.jsx)("input",{value:b,onChange:function(e){return h(e.target.value)},className:"form-control me-2",type:"search",placeholder:"Search for friends","aria-label":"Search",style:{width:"30vw",borderRadius:"2vh",border:"solid black .2vh"}}),Object(u.jsxs)("button",{className:"btn",type:"submit",style:{display:"flex",alignItems:"center",backgroundColor:"#1877f2"},children:[" ",Object(u.jsx)("i",{className:"fas fa-search"})]})]})]})]})})})}var w=s(18),k=s.p+"static/media/gift-1020-542634.2852fa24.png",C=s.p+"static/media/crowd1.7f73f4a1.jpg";function S(e){var t=Object(n.useState)({}),s=Object(l.a)(t,2),i=s[0],c=s[1];return Object(n.useEffect)((function(){var t=function(){var t=Object(d.a)(o.a.mark((function t(){var s;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,v.a.get("https://smart-chat15.herokuapp.com/"+"api/users/".concat(e.id));case 2:s=t.sent,c(s.data);case 4:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();t()}),[e.id]),Object(u.jsxs)("div",{className:"d-flex align-items-center nav-link link-dark text-decoration-none",children:[Object(u.jsx)("img",{src:i.profilePicture?i.profilePicture:p,alt:"",width:32,height:32,className:"rounded-circle me-2"}),Object(u.jsx)("span",{className:"position-absolute top-1 start-1 translate-middle p-2 bg-success border border-light rounded-circle",children:Object(u.jsx)("span",{className:"visually-hidden",children:"New alerts"})}),Object(u.jsx)("strong",{children:i.name})]})}function N(){var e,t,s=Object(n.useContext)(j).user,i=Object(n.useState)([]),c=Object(l.a)(i,2),a=c[0],r=c[1],o=Object(n.useState)([]),d=Object(l.a)(o,2),b=d[0],h=d[1],p=new Date;return Object(n.useEffect)((function(){var e=null===s||void 0===s?void 0:s.followings;e=(null===s||void 0===s?void 0:s.followings)?e.concat(null===s||void 0===s?void 0:s.followers):null===s||void 0===s?void 0:s.followers,r(e)}),[s]),Object(n.useEffect)((function(){((null===a||void 0===a?void 0:a.length)>0||a)&&a.forEach((function(e){var t;t=e,v.a.get("https://smart-chat15.herokuapp.com/"+"api/users/".concat(t)).then((function(e){var t,s;new Date(null===(t=e.data)||void 0===t?void 0:t.DOB).getDate()===p.getDate()&&new Date(null===(s=e.data)||void 0===s?void 0:s.DOB).getMonth()===p.getMonth()&&h([].concat(Object(w.a)(b),[e.data]))})).catch((function(e){return console.log(e)}))}))}),[a]),Object(u.jsx)("div",{className:"p-3 bg-light right",children:Object(u.jsxs)("ul",{className:"nav nav-pills flex-column mb-auto",children:[Object(u.jsxs)("div",{style:{display:"flex",alignItems:"center",width:"28vw"},children:[Object(u.jsx)("div",{style:{height:"55px",width:"50px"},children:Object(u.jsx)("img",{style:{maxHeight:"100%",maxWidth:"100%"},src:k,alt:""})}),b.length>1?Object(u.jsxs)("p",{children:[Object(u.jsx)("strong",{children:null===(e=b[0])||void 0===e?void 0:e.name})," and ",Object(u.jsxs)("strong",{children:[b.length-1," others"]})," have birthday today!! Wish them now"]}):Object(u.jsxs)("p",{children:[Object(u.jsx)("strong",{children:1===b.length?null===(t=b[0])||void 0===t?void 0:t.name:"No one"})," has birthday today!! ",1===b.length?"Wish now":""]})]}),Object(u.jsx)("div",{style:{width:"27vw"},children:Object(u.jsx)("img",{style:{width:"27vw",maxHeight:"30vh"},className:"img-fluid",src:C,alt:""})}),Object(u.jsx)("hr",{}),Object(u.jsx)("strong",{style:{fontSize:"4vh"},children:"Online friends"}),a&&0!==a.length&&a.map((function(e){return Object(u.jsx)(S,{id:e})}))]})})}function _(){Object(n.useEffect)((function(){window.scrollTo(0,0)}),[]);var e=Object(n.useContext)(j).user;return Object(u.jsx)(u.Fragment,{children:null!==e?Object(u.jsxs)(u.Fragment,{children:[Object(u.jsx)(y,{}),Object(u.jsxs)("div",{className:"d-flex",children:[Object(u.jsx)("div",{className:"top",style:{position:"relative",top:"57px",left:"1vw"},children:Object(u.jsx)(g,{})}),Object(u.jsx)("div",{style:{position:"relative",top:"65px",left:"2vw"},children:Object(u.jsx)(N,{})})]})]}):Object(u.jsx)("div",{})})}var I=s(43);s(116);I.a.initializeApp({apiKey:"AIzaSyAH5d3Wjr_NgyJgdx9ra7WjZOzmVx08eHk",authDomain:"fir-react-upload-391f1.firebaseapp.com",projectId:"fir-react-upload-391f1",storageBucket:"fir-react-upload-391f1.appspot.com",messagingSenderId:"815346693654",appId:"1:815346693654:web:9d67a268ca505c96fa6737",measurementId:"G-J6R2THCK2K"});var F=I.a.storage();function P(e){var t=Object(n.useState)({}),s=Object(l.a)(t,2),i=s[0],c=s[1];return Object(n.useEffect)((function(){var t=function(){var t=Object(d.a)(o.a.mark((function t(){var s;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,v.a.get("https://smart-chat15.herokuapp.com/"+"api/users/".concat(e.id));case 2:s=t.sent,c(s.data);case 4:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();t()}),[e.id]),Object(u.jsxs)("div",{className:"d-flex nav-link link-dark text-decoration-none",children:[Object(u.jsx)(O.b,{to:"/profile/".concat(null===i||void 0===i?void 0:i.name),children:Object(u.jsx)("div",{style:{height:"25vw",width:"25vw",display:"flex",justifyContent:"center",alignItems:"center",border:"solid white 3px",backgroundColor:"black",overflow:"hidden"},class:"avatar rounded-circle",children:Object(u.jsx)("img",{src:(null===i||void 0===i?void 0:i.profilePicture)?null===i||void 0===i?void 0:i.profilePicture:p,alt:"",style:{maxHeight:"100%",maxWidth:"100%"}})})}),Object(u.jsx)("div",{style:{width:"53vw",height:"25vw",position:"relative",left:"-2.5vw",display:"flex",alignItems:"center"},children:Object(u.jsxs)("ul",{style:{listStyle:"none",fontSize:"2.8vw"},children:[Object(u.jsx)("li",{children:Object(u.jsx)("strong",{children:null===i||void 0===i?void 0:i.name})}),Object(u.jsxs)("li",{children:[Object(u.jsx)("b",{children:"City:"})," ",(null===i||void 0===i?void 0:i.city)?null===i||void 0===i?void 0:i.city:"Unknown"]}),Object(u.jsxs)("li",{children:[Object(u.jsx)("b",{children:"From:"})," ",(null===i||void 0===i?void 0:i.from)?null===i||void 0===i?void 0:i.from:"Unknown"]}),Object(u.jsxs)("li",{children:[Object(u.jsx)("b",{children:"Relationship Status:"})," ",(null===i||void 0===i?void 0:i.relationship)?(null===i||void 0===i?void 0:i.relationship.length)>20?(null===i||void 0===i?void 0:i.relationship.slice(0,20))+"...":null===i||void 0===i?void 0:i.relationship:"Unknown"]})]})})]})}function U(e){var t,s,i,c,a,r,b,h,x,O,m,g,y,w,k,C,S,N=Object(f.g)(),_=Object(n.useContext)(j).user,I=Object(n.useState)(null),U=Object(l.a)(I,2),D=U[0],R=U[1],B=Object(n.useRef)(),E=Object(n.useState)(null===(t=e.user)||void 0===t||null===(s=t.followers)||void 0===s?void 0:s.includes(null===_||void 0===_?void 0:_._id)),L=Object(l.a)(E,2),A=L[0],z=L[1],M=Object(n.useState)(null),W=Object(l.a)(M,2),H=W[0],T=W[1];Object(n.useEffect)((function(){var t,s,n,i,c;console.log(null===_||void 0===_?void 0:_._id),console.log(null===(t=e.user)||void 0===t?void 0:t._id),console.log(null===(s=e.user)||void 0===s||null===(n=s.followers)||void 0===n?void 0:n.includes(null===_||void 0===_?void 0:_._id)),z(null===(i=e.user)||void 0===i||null===(c=i.followers)||void 0===c?void 0:c.includes(null===_||void 0===_?void 0:_._id))}),[]),Object(n.useEffect)((function(){var t,s,n,i,c=null===(t=e.user)||void 0===t?void 0:t.following;(null===(s=e.user)||void 0===s?void 0:s.following)?c=c.concat(null===(n=e.user)||void 0===n?void 0:n.followers.filter((function(t){var s;return!(null===(s=e.user)||void 0===s?void 0:s.following.includes(t))}))):c=null===(i=e.user)||void 0===i?void 0:i.followers;0!==c.length&&T(c)}),[e.user]);var q=function(){var t=Object(d.a)(o.a.mark((function t(){var s,n;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(A){t.next=7;break}return t.next=3,v.a.put("https://smart-chat15.herokuapp.com/"+"api/users/".concat(null===(s=e.user)||void 0===s?void 0:s._id,"/follow"),{userId:null===_||void 0===_?void 0:_._id});case 3:"you are following"===t.sent.data&&window.location.reload(),t.next=11;break;case 7:return t.next=9,v.a.put("https://smart-chat15.herokuapp.com/"+"api/users/".concat(null===(n=e.user)||void 0===n?void 0:n._id,"/unfollow"),{userId:null===_||void 0===_?void 0:_._id});case 9:"you are unfollowing"===t.sent.data&&window.location.reload();case 11:z(!A);case 12:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),J=function(){var e=Object(d.a)(o.a.mark((function e(t){var s;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),""===V&&""===$&&""===se&&""===ae){e.next=10;break}return e.next=4,v.a.put("https://smart-chat15.herokuapp.com/"+"api/users/".concat(null===_||void 0===_?void 0:_._id),{city:""!==V?V:_.city,from:""!==$?$:_.from,relationship:""!==se?se:_.relationship,desc:""!==ae?ae:_.desc});case 4:s=e.sent,X(""),Q(""),ne(""),le(""),"successfully updated"===s.data&&window.location.reload();case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),K=Object(n.useState)(""),G=Object(l.a)(K,2),V=G[0],X=G[1],Y=Object(n.useState)(""),Z=Object(l.a)(Y,2),$=Z[0],Q=Z[1],ee=Object(n.useState)(""),te=Object(l.a)(ee,2),se=te[0],ne=te[1],ie=Object(n.useState)(""),ce=Object(l.a)(ie,2),ae=ce[0],le=ce[1];return Object(u.jsx)(u.Fragment,{children:null!==e.user&&null!==_?Object(u.jsxs)(u.Fragment,{children:[Object(u.jsx)("div",{className:"card mb-3 upload",style:{position:"relative",top:"15px",display:(null===_||void 0===_?void 0:_._id)!==(null===(i=e.user)||void 0===i?void 0:i._id)?"none":""},children:Object(u.jsx)("div",{className:"card-body",children:Object(u.jsxs)("form",{onSubmit:function(t){t.preventDefault(),e.progress(10);var s=F.ref("images/".concat(null===D||void 0===D?void 0:D.name)).put(D);e.progress(30),s.on("state_changed",(function(e){}),(function(e){console.log(e)}),(function(){F.ref("images").child(D.name).getDownloadURL().then((function(t){e.progress(70),v.a.post("https://smart-chat15.herokuapp.com/api/posts",{userId:e.user._id,img:t,desc:B.current.value}).then(e.progress(100),N.push("/"))}))}))},children:[Object(u.jsxs)("div",{className:"card-title d-flex",children:[Object(u.jsx)("img",{src:(null===(c=e.user)||void 0===c?void 0:c.profilePicture)?null===(a=e.user)||void 0===a?void 0:a.profilePicture:p,alt:"",width:40,height:40,className:"rounded-circle me-2"}),Object(u.jsx)("input",{className:"textarea",style:{border:"none",outline:"none",position:"relative",left:"1vw"},id:"",placeholder:"What's in your mind...",ref:B})]}),Object(u.jsx)("hr",{}),Object(u.jsxs)("div",{className:"row row-cols-sm-1 row-cols-md-3 align-items-stretch g-2",style:{position:"relative",top:"3vh",paddingBottom:"30px"},children:[Object(u.jsxs)("div",{className:"col",style:{position:"relative",left:"2vw"},children:[Object(u.jsx)("i",{class:"far fa-images fa-2x"}),Object(u.jsx)("b",{children:"   Upload images"})]}),Object(u.jsx)("input",{style:{position:"relative",left:"2vw"},type:"file",id:"file",onChange:function(e){e.target.files[0]&&R(e.target.files[0])}}),Object(u.jsx)("div",{style:{position:"relative",left:"2vw"},children:Object(u.jsx)("button",{className:"btn btn-success",type:"submit",disabled:null===D?"true":"",children:"Share"})})]})]})})}),Object(u.jsx)("div",{children:Object(u.jsxs)("div",{className:"p-3 bg-light frnds",children:[Object(u.jsx)("button",{onClick:q,style:{display:(null===_||void 0===_?void 0:_._id)===(null===(r=e.user)||void 0===r?void 0:r._id)?"none":""},className:"btn btn-primary",children:A?"Unfollow":"Follow"}),Object(u.jsxs)("ul",{className:"nav nav-pills flex-column mb-auto py-2",children:[Object(u.jsxs)("div",{style:{width:"80vw"},children:[Object(u.jsxs)("strong",{children:["About ",null===(b=e.user)||void 0===b?void 0:b.name]}),Object(u.jsx)("i",{style:{position:"relative",left:"5vw",display:(null===(h=e.user)||void 0===h?void 0:h._id)===_._id?"":"none"},type:"button","data-bs-toggle":"modal","data-bs-target":"#exampleModal2",class:"far fa-edit"}),Object(u.jsx)("div",{class:"modal fade",id:"exampleModal2",tabindex:"-1","aria-labelledby":"exampleModalLabel","aria-hidden":"true",children:Object(u.jsx)("div",{class:"modal-dialog",children:Object(u.jsxs)("div",{class:"modal-content",children:[Object(u.jsxs)("div",{class:"modal-header",style:{color:"white",backgroundColor:"black"},children:[Object(u.jsx)("h5",{class:"modal-title",id:"exampleModalLabel",children:Object(u.jsxs)("b",{children:["About ",null===(x=e.user)||void 0===x?void 0:x.name]})}),Object(u.jsx)("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})]}),Object(u.jsx)("div",{class:"modal-body",children:Object(u.jsxs)("form",{onSubmit:J,children:[Object(u.jsxs)("div",{class:"mb-3",children:[Object(u.jsx)("label",{for:"city-name",class:"col-form-label",children:Object(u.jsx)("b",{children:"City:"})}),Object(u.jsx)("input",{type:"text",class:"form-control",id:"city-name",value:V,onChange:function(e){return X(e.target.value)}})]}),Object(u.jsxs)("div",{class:"mb-3",children:[Object(u.jsx)("label",{for:"from",class:"col-form-label",children:Object(u.jsx)("b",{children:"From:"})}),Object(u.jsx)("input",{type:"text",class:"form-control",id:"from",value:$,onChange:function(e){return Q(e.target.value)}})]}),Object(u.jsxs)("div",{class:"mb-3",children:[Object(u.jsx)("label",{for:"relation",class:"col-form-label",children:Object(u.jsx)("b",{children:"Relationship:"})}),Object(u.jsx)("input",{type:"text",class:"form-control",id:"relation",value:se,onChange:function(e){return ne(e.target.value)}})]}),Object(u.jsxs)("div",{class:"mb-3",children:[Object(u.jsx)("label",{for:"desc",class:"col-form-label",children:Object(u.jsx)("b",{children:"Description:"})}),Object(u.jsx)("input",{type:"text",class:"form-control",id:"desc",value:ae,onChange:function(e){return le(e.target.value)}})]}),Object(u.jsxs)("div",{class:"modal-footer",children:[Object(u.jsx)("button",{type:"button",class:"btn btn-secondary","data-bs-dismiss":"modal",children:"Close"}),Object(u.jsx)("button",{class:"btn btn-primary","data-bs-dismiss":"modal",type:"submit",children:"Save changes"})]})]})})]})})}),Object(u.jsxs)("ul",{children:[Object(u.jsxs)("li",{children:[Object(u.jsx)("b",{children:"City:"})," ",(null===(O=e.user)||void 0===O?void 0:O.city)?null===(m=e.user)||void 0===m?void 0:m.city:"Unknown"]}),Object(u.jsxs)("li",{children:[Object(u.jsx)("b",{children:"From:"})," ",(null===(g=e.user)||void 0===g?void 0:g.from)?null===(y=e.user)||void 0===y?void 0:y.from:"Unknown"]}),Object(u.jsxs)("li",{children:[Object(u.jsx)("b",{children:"Relationship Status:"})," ",(null===(w=e.user)||void 0===w?void 0:w.relationship)?(null===(k=e.user)||void 0===k?void 0:k.relationship.length)>20?null===(C=e.user)||void 0===C?void 0:C.relationship.slice(0,20):null===(S=e.user)||void 0===S?void 0:S.relationship:"Unknown"]})]})]}),Object(u.jsx)("hr",{}),Object(u.jsx)("button",{type:"button","data-bs-toggle":"modal","data-bs-target":"#staticBackdrop2",className:"btn btn-secondary",children:"Friends"}),Object(u.jsx)("div",{class:"modal fade",id:"staticBackdrop2","data-bs-backdrop":"static","data-bs-keyboard":"false",tabindex:"-1","aria-labelledby":"staticBackdropLabel","aria-hidden":"true",children:Object(u.jsx)("div",{class:"modal-dialog",children:Object(u.jsxs)("div",{class:"modal-content",children:[Object(u.jsxs)("div",{class:"modal-header",style:{color:"white",backgroundColor:"black"},children:[Object(u.jsx)("h5",{class:"modal-title",id:"staticBackdropLabel",children:Object(u.jsx)("b",{children:"Friends"})}),Object(u.jsx)("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})]}),Object(u.jsx)("div",{class:"modal-body",children:Object(u.jsx)("ul",{className:"nav nav-pills flex-column mb-auto",children:null!==H?H.map((function(e){return Object(u.jsx)("li",{"data-bs-dismiss":"modal",children:Object(u.jsx)(P,{id:e})})})):Object(u.jsx)("div",{children:"No friends added"})})}),Object(u.jsx)("div",{class:"modal-footer",children:Object(u.jsx)("button",{type:"button",class:"btn btn-secondary","data-bs-dismiss":"modal",children:"Close"})})]})})})]})]})})]}):Object(u.jsx)("div",{})})}var D=s(6);function R(e){var t=Object(n.useState)({}),s=Object(l.a)(t,2),i=s[0],c=s[1];return Object(n.useEffect)((function(){var t=function(){var t=Object(d.a)(o.a.mark((function t(){var s;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,v.a.get("https://smart-chat15.herokuapp.com/"+"api/users/".concat(e.id));case 2:s=t.sent,c(s.data);case 4:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();t()}),[e.id]),Object(u.jsxs)("div",{className:"d-flex nav-link link-dark text-decoration-none",children:[Object(u.jsx)(O.b,{to:"/profile/".concat(null===i||void 0===i?void 0:i.name),children:Object(u.jsx)("div",{style:{height:"12vw",width:"12vw",display:"flex",justifyContent:"center",alignItems:"center",border:"solid white 3px",backgroundColor:"black",overflow:"hidden",position:"relative",left:"-1.5vw"},class:"avatar rounded-circle",children:Object(u.jsx)("img",{src:(null===i||void 0===i?void 0:i.profilePicture)?null===i||void 0===i?void 0:i.profilePicture:p,alt:"",style:{maxHeight:"100%",maxWidth:"100%"}})})}),Object(u.jsx)("div",{style:{width:"14vw",height:"12svw",position:"relative",left:"-2.5vw",display:"flex",alignItems:"center"},children:Object(u.jsxs)("ul",{style:{listStyle:"none",fontSize:"1.3vw"},children:[Object(u.jsx)("li",{children:Object(u.jsx)("strong",{children:null===i||void 0===i?void 0:i.name})}),Object(u.jsxs)("li",{children:[Object(u.jsx)("b",{children:"City:"})," ",(null===i||void 0===i?void 0:i.city)?null===i||void 0===i?void 0:i.city:"Unknown"]}),Object(u.jsxs)("li",{children:[Object(u.jsx)("b",{children:"From:"})," ",(null===i||void 0===i?void 0:i.from)?null===i||void 0===i?void 0:i.from:"Unknown"]}),Object(u.jsxs)("li",{children:[Object(u.jsx)("b",{children:"Relationship Status:"})," ",(null===i||void 0===i?void 0:i.relationship)?null===i||void 0===i?void 0:i.relationship:"Unknown"]})]})})]})}function B(e){var t,s,i,c,a,r,b,h,p,x,f,O,m,g,y,w=Object(n.useContext)(j),k=w.user,C=w.setuser,S=Object(n.useState)(null===(t=e.user)||void 0===t?void 0:t.followers.includes(null===k||void 0===k?void 0:k._id)),N=Object(l.a)(S,2),_=N[0],I=N[1],F=Object(n.useState)(null),P=Object(l.a)(F,2),U=P[0],B=P[1];Object(n.useEffect)((function(){var t,s,n;console.log(null===k||void 0===k?void 0:k._id),console.log(null===(t=e.user)||void 0===t?void 0:t._id),console.log(null===(s=e.user)||void 0===s?void 0:s.followers.includes(null===k||void 0===k?void 0:k._id)),I(null===(n=e.user)||void 0===n?void 0:n.followers.includes(null===k||void 0===k?void 0:k._id))}),[]),Object(n.useEffect)((function(){var t,s,n,i,c=null===(t=e.user)||void 0===t?void 0:t.following;(null===(s=e.user)||void 0===s?void 0:s.following)?c=c.concat(null===(n=e.user)||void 0===n?void 0:n.followers.filter((function(t){var s;return!(null===(s=e.user)||void 0===s?void 0:s.following.includes(t))}))):c=null===(i=e.user)||void 0===i?void 0:i.followers;0!==c.length&&B(c)}),[e.user]);var E=function(){var t=Object(d.a)(o.a.mark((function t(){var s,n,i,c,a;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(_){t.next=9;break}return k.following.push(null===(s=e.user)||void 0===s?void 0:s._id),i=k.following,C(Object(D.a)(Object(D.a)({},k),{},{following:i})),t.next=6,v.a.put("https://smart-chat15.herokuapp.com/"+"api/users/".concat(null===(n=e.user)||void 0===n?void 0:n._id,"/follow"),{userId:null===k||void 0===k?void 0:k._id});case 6:t.sent,t.next=14;break;case 9:return a=k.following.filter((function(t){var s;return t!==(null===(s=e.user)||void 0===s?void 0:s._id)})),C(Object(D.a)(Object(D.a)({},k),{},{following:a})),t.next=13,v.a.put("https://smart-chat15.herokuapp.com/"+"api/users/".concat(null===(c=e.user)||void 0===c?void 0:c._id,"/unfollow"),{userId:null===k||void 0===k?void 0:k._id});case 13:t.sent;case 14:I(!_);case 15:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),L=function(){var e=Object(d.a)(o.a.mark((function e(t){var s;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),""===M&&""===q&&""===V&&""===$&&""===se){e.next=12;break}return e.next=4,v.a.put("https://smart-chat15.herokuapp.com/"+"api/users/".concat(null===k||void 0===k?void 0:k._id),{city:""!==M?M:k.city,from:""!==q?q:k.from,relationship:""!==V?V:k.relationship,desc:""!==$?$:k.desc,DOB:""!==se?se:null===k||void 0===k?void 0:k.DOB});case 4:s=e.sent,W(""),J(""),X(""),Q(""),ne(""),console.log(s),"successfully updated"===s.data&&window.location.reload();case 12:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),A=Object(n.useState)(""),z=Object(l.a)(A,2),M=z[0],W=z[1],H=Object(n.useState)(""),T=Object(l.a)(H,2),q=T[0],J=T[1],K=Object(n.useState)(""),G=Object(l.a)(K,2),V=G[0],X=G[1],Y=Object(n.useState)(""),Z=Object(l.a)(Y,2),$=Z[0],Q=Z[1],ee=Object(n.useState)(""),te=Object(l.a)(ee,2),se=te[0],ne=te[1];return Object(u.jsxs)("div",{className:"p-3 bg-light right",children:[Object(u.jsx)("button",{onClick:E,style:{display:(null===k||void 0===k?void 0:k._id)===(null===(s=e.user)||void 0===s?void 0:s._id)?"none":""},className:"btn btn-primary",children:_?"Unfollow":"Follow"}),Object(u.jsxs)("ul",{className:"nav nav-pills flex-column mb-auto py-2",children:[Object(u.jsxs)("div",{style:{width:"28vw"},children:[Object(u.jsxs)("strong",{children:["About ",null===(i=e.user)||void 0===i?void 0:i.name]}),Object(u.jsx)("i",{style:{position:"relative",left:"5vw",display:(null===(c=e.user)||void 0===c?void 0:c._id)===k._id?"":"none"},type:"button","data-bs-toggle":"modal","data-bs-target":"#exampleModal4",class:"far fa-edit"}),Object(u.jsx)("div",{class:"modal fade",id:"exampleModal4",tabindex:"-1","aria-labelledby":"exampleModalLabel","aria-hidden":"true",children:Object(u.jsx)("div",{class:"modal-dialog",children:Object(u.jsxs)("div",{class:"modal-content",children:[Object(u.jsxs)("div",{class:"modal-header",style:{color:"white",backgroundColor:"black"},children:[Object(u.jsx)("h5",{class:"modal-title",id:"exampleModalLabel",children:Object(u.jsxs)("b",{children:["About ",null===(a=e.user)||void 0===a?void 0:a.name]})}),Object(u.jsx)("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})]}),Object(u.jsx)("div",{class:"modal-body",children:Object(u.jsxs)("form",{onSubmit:L,children:[Object(u.jsxs)("div",{class:"mb-3",children:[Object(u.jsx)("label",{for:"city-name",class:"col-form-label",children:Object(u.jsx)("b",{children:"City:"})}),Object(u.jsx)("input",{type:"text",class:"form-control",id:"city-name",value:M,onChange:function(e){return W(e.target.value)}})]}),Object(u.jsxs)("div",{class:"mb-3",children:[Object(u.jsx)("label",{for:"from",class:"col-form-label",children:Object(u.jsx)("b",{children:"From:"})}),Object(u.jsx)("input",{type:"text",class:"form-control",id:"from",value:q,onChange:function(e){return J(e.target.value)}})]}),Object(u.jsxs)("div",{class:"mb-3",children:[Object(u.jsx)("label",{for:"relation",class:"col-form-label",children:Object(u.jsx)("b",{children:"Relationship:"})}),Object(u.jsx)("input",{type:"text",class:"form-control",id:"relation",value:V,onChange:function(e){return X(e.target.value)}})]}),Object(u.jsxs)("div",{class:"mb-3",children:[Object(u.jsx)("label",{for:"desc",class:"col-form-label",children:Object(u.jsx)("b",{children:"Description:"})}),Object(u.jsx)("input",{type:"text",class:"form-control",id:"desc",value:$,onChange:function(e){return Q(e.target.value)}})]}),Object(u.jsxs)("div",{class:"mb-3",children:[Object(u.jsx)("label",{for:"desc",class:"col-form-label",children:Object(u.jsx)("b",{children:"DOB:"})}),Object(u.jsx)("input",{type:"date",class:"form-control",id:"dob",value:se,onChange:function(e){return ne(e.target.value)}})]}),Object(u.jsxs)("div",{class:"modal-footer",children:[Object(u.jsx)("button",{type:"button",class:"btn btn-secondary","data-bs-dismiss":"modal",children:"Close"}),Object(u.jsx)("button",{class:"btn btn-primary","data-bs-dismiss":"modal",type:"submit",children:"Save changes"})]})]})})]})})}),Object(u.jsxs)("ul",{children:[Object(u.jsxs)("li",{children:[Object(u.jsx)("b",{children:"City:"})," ",(null===(r=e.user)||void 0===r?void 0:r.city)?null===(b=e.user)||void 0===b?void 0:b.city:"Unknown"]}),Object(u.jsxs)("li",{children:[Object(u.jsx)("b",{children:"From:"})," ",(null===(h=e.user)||void 0===h?void 0:h.from)?null===(p=e.user)||void 0===p?void 0:p.from:"Unknown"]}),Object(u.jsxs)("li",{children:[Object(u.jsx)("b",{children:"DOB:"})," ",(null===(x=e.user)||void 0===x?void 0:x.DOB)?new Date(null===(f=e.user)||void 0===f?void 0:f.DOB).toLocaleDateString("en-GB"):"Unknown"]}),Object(u.jsxs)("li",{children:[Object(u.jsx)("b",{children:"Relationship Status:"})," ",(null===(O=e.user)||void 0===O?void 0:O.relationship)?(null===(m=e.user)||void 0===m?void 0:m.relationship.length)>20?null===(g=e.user)||void 0===g?void 0:g.relationship.slice(0,20):null===(y=e.user)||void 0===y?void 0:y.relationship:"Unknown"]})]})]}),Object(u.jsx)("hr",{}),Object(u.jsx)("strong",{style:{fontSize:"30px"},children:"Friends"}),null!==U?U.map((function(e){return Object(u.jsx)("li",{children:Object(u.jsx)(R,{id:e})})})):Object(u.jsx)("div",{children:"No friends added"})]})]})}var E=s.p+"static/media/cover.aa52ea16.jpg";function L(e){var t,s,i,c,a,r,o,d=Object(n.useContext)(j).user,b=Object(n.useState)(null),h=Object(l.a)(b,2),x=h[0],O=h[1],m=Object(n.useState)(null),g=Object(l.a)(m,2),y=g[0],w=g[1],k=Object(f.g)();return Object(u.jsxs)(u.Fragment,{children:[Object(u.jsxs)("div",{className:"dp",children:[Object(u.jsx)("div",{style:{display:"flex",justifyContent:"center",height:"85%",backgroundColor:"#535151"},className:"dp",children:Object(u.jsx)("img",{style:{maxWidth:"100%",height:"100%"},src:(null===(t=e.user)||void 0===t?void 0:t.coverPicture)?null===(s=e.user)||void 0===s?void 0:s.coverPicture:E,alt:""})}),Object(u.jsx)("div",{style:{display:"flex",justifyContent:"center",position:"relative",top:"-14vw"},children:Object(u.jsx)("div",{style:{height:"20vw",width:"20vw",display:"flex",justifyContent:"center",alignItems:"center",border:"solid white 3px",backgroundColor:"black",overflow:"hidden"},class:"avatar rounded-circle",children:Object(u.jsx)("img",{src:(null===(i=e.user)||void 0===i?void 0:i.profilePicture)?null===(c=e.user)||void 0===c?void 0:c.profilePicture:p,alt:"",style:{maxHeight:"100%",maxWidth:"100%"}})})}),Object(u.jsx)("strong",{style:{display:"flex",justifyContent:"center",position:"relative",top:"-13vw",width:"100%"},children:null===(a=e.user)||void 0===a?void 0:a.name})]}),Object(u.jsx)("div",{className:"dp1",children:Object(u.jsx)("strong",{style:{display:"flex",justifyContent:"center",width:"100%",textAlign:"center"},children:null===(r=e.user)||void 0===r?void 0:r.desc})}),Object(u.jsxs)("div",{style:{display:(null===d||void 0===d?void 0:d._id)!==(null===(o=e.user)||void 0===o?void 0:o._id)?"none":""},className:"padding",children:[Object(u.jsxs)("div",{type:"button","data-bs-toggle":"modal","data-bs-target":"#exampleModal",children:[Object(u.jsx)("i",{class:"fas fa-camera fa-2x"}),Object(u.jsx)("b",{children:" Update profile picture"})]}),Object(u.jsx)("div",{class:"modal fade",id:"exampleModal",tabindex:"-1","aria-labelledby":"exampleModalLabel","aria-hidden":"true",children:Object(u.jsx)("div",{class:"modal-dialog",children:Object(u.jsxs)("div",{class:"modal-content",children:[Object(u.jsxs)("div",{class:"modal-header",style:{color:"white",backgroundColor:"black"},children:[Object(u.jsx)("h5",{class:"modal-title",id:"exampleModalLabel",children:Object(u.jsx)("b",{children:"Upload profile picture"})}),Object(u.jsx)("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})]}),Object(u.jsx)("div",{class:"modal-body",children:Object(u.jsxs)("form",{onSubmit:function(t){t.preventDefault(),e.progress(10);var s=F.ref("images/".concat(null===x||void 0===x?void 0:x.name)).put(x);e.progress(30),s.on("state_changed",(function(e){}),(function(e){console.log(e)}),(function(){F.ref("images").child(null===x||void 0===x?void 0:x.name).getDownloadURL().then((function(t){var s;e.progress(70),v.a.put("https://smart-chat15.herokuapp.com/"+"api/users/".concat(null===(s=e.user)||void 0===s?void 0:s._id),{profilePicture:t}).then(e.progress(100),k.push("/"))}))}))},children:[Object(u.jsxs)("div",{class:"mb-3",children:[Object(u.jsx)("label",{htmlFor:"file"}),Object(u.jsx)("input",{id:"file",type:"file",onChange:function(e){e.target.files[0]&&O(e.target.files[0])}})]}),Object(u.jsxs)("div",{class:"modal-footer",children:[Object(u.jsx)("button",{type:"button",class:"btn btn-secondary","data-bs-dismiss":"modal",children:"Close"}),Object(u.jsx)("button",{className:"btn btn-primary","data-bs-dismiss":"modal",type:"submit",disabled:null===x?"true":"",children:"Upload"})]})]})})]})})}),Object(u.jsxs)("div",{type:"button","data-bs-toggle":"modal","data-bs-target":"#exampleModal1",children:[Object(u.jsx)("i",{class:"fas fa-camera fa-2x"}),Object(u.jsx)("b",{children:" Update cover picture"})]}),Object(u.jsx)("div",{class:"modal fade",id:"exampleModal1",tabindex:"-1","aria-labelledby":"exampleModalLabel","aria-hidden":"true",children:Object(u.jsx)("div",{class:"modal-dialog",children:Object(u.jsxs)("div",{class:"modal-content",children:[Object(u.jsxs)("div",{class:"modal-header",style:{color:"white",backgroundColor:"black"},children:[Object(u.jsx)("h5",{class:"modal-title",id:"exampleModalLabel",children:Object(u.jsx)("b",{children:"Upload cover picture"})}),Object(u.jsx)("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})]}),Object(u.jsx)("div",{class:"modal-body",children:Object(u.jsxs)("form",{onSubmit:function(t){t.preventDefault(),e.progress(10);var s=F.ref("images/".concat(null===y||void 0===y?void 0:y.name)).put(y);e.progress(30),s.on("state_changed",(function(e){}),(function(e){console.log(e)}),(function(){F.ref("images").child(null===y||void 0===y?void 0:y.name).getDownloadURL().then((function(t){var s;e.progress(70),v.a.put("https://smart-chat15.herokuapp.com/"+"api/users/".concat(null===(s=e.user)||void 0===s?void 0:s._id),{coverPicture:t}).then(e.progress(100),k.push("/"))}))}))},children:[Object(u.jsxs)("div",{class:"mb-3",children:[Object(u.jsx)("label",{htmlFor:"file1"}),Object(u.jsx)("input",{id:"file1",type:"file",onChange:function(e){e.target.files[0]&&w(e.target.files[0])}})]}),Object(u.jsxs)("div",{class:"modal-footer",children:[Object(u.jsx)("button",{type:"button",class:"btn btn-secondary","data-bs-dismiss":"modal",children:"Close"}),Object(u.jsx)("button",{className:"btn btn-primary","data-bs-dismiss":"modal",type:"submit",disabled:null===y?"true":"",children:"Upload"})]})]})})]})})})]})]})}function A(e){var t,s,i,c=Object(n.useContext)(j).user,a=Object(n.useState)(null),r=Object(l.a)(a,2),b=r[0],h=r[1];return Object(n.useEffect)((function(){var t=function(){var t=Object(d.a)(o.a.mark((function t(){var s,n;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,v.a.get("https://smart-chat15.herokuapp.com/"+"api/posts/all/".concat(null===(s=e.user)||void 0===s?void 0:s._id));case 3:n=t.sent,h(n.data.sort((function(e,t){return new Date(t.createdAt)-new Date(e.createdAt)}))),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),console.log(t.t0);case 10:case"end":return t.stop()}}),t,null,[[0,7]])})));return function(){return t.apply(this,arguments)}}();t()}),[e.user]),Object(u.jsx)(u.Fragment,{children:(null===c||void 0===c?void 0:c._id)===(null===(t=e.user)||void 0===t?void 0:t._id)||(null===c||void 0===c||null===(s=c.following)||void 0===s?void 0:s.includes(null===(i=e.user)||void 0===i?void 0:i._id))?Object(u.jsx)("div",{children:0!==(null===b||void 0===b?void 0:b.length)?Object(u.jsx)(u.Fragment,{children:null===b||void 0===b?void 0:b.map((function(e){return Object(u.jsx)(m,{post:e})}))}):Object(u.jsxs)(u.Fragment,{children:[Object(u.jsx)("div",{style:{display:"flex",justifyContent:"center"},children:Object(u.jsx)("b",{style:{fontSize:"35px",textAlign:"center"},children:"Nothing to Show"})}),Object(u.jsx)("div",{style:{display:"flex",justifyContent:"center"},children:Object(u.jsx)("i",{class:"fas fa-camera fa-9x"})})]})}):Object(u.jsxs)(u.Fragment,{children:[Object(u.jsx)("div",{style:{display:"flex",justifyContent:"center"},children:Object(u.jsx)("b",{style:{fontSize:"35px",textAlign:"center"},children:"Follow to see posts"})}),Object(u.jsx)("div",{style:{display:"flex",justifyContent:"center"},children:Object(u.jsx)("i",{class:"fas fa-camera-retro fa-9x"})})]})})}function z(e){var t=Object(n.useState)(null),s=Object(l.a)(t,2),i=s[0],c=s[1],a=Object(n.useContext)(j).user,r=Object(f.h)().username;return Object(n.useEffect)((function(){var e=function(){var e=Object(d.a)(o.a.mark((function e(){var t;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v.a.get("https://smart-chat15.herokuapp.com/"+"api/users/name/".concat(r));case 2:t=e.sent,c(t.data);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();e(),window.scrollTo(0,0)}),[r]),Object(u.jsx)(u.Fragment,{children:null!==i&&null!==a?Object(u.jsxs)(u.Fragment,{children:[Object(u.jsx)(y,{}),Object(u.jsx)("div",{className:"d-flex",children:Object(u.jsxs)("div",{style:{position:"relative",top:"57px",left:"1vw"},children:[Object(u.jsx)(L,{user:i,progress:e.progress}),Object(u.jsx)(U,{user:i,progress:e.progress}),Object(u.jsxs)("div",{className:"d-flex",children:[Object(u.jsx)("div",{className:"top",style:{paddingTop:"5px"},children:Object(u.jsx)(A,{user:i})}),Object(u.jsx)("div",{style:{position:"relative",top:"10px",left:"1vw"},children:Object(u.jsx)(B,{user:i})})]})]})})]}):Object(u.jsx)("div",{})})}var M=s(123),W=s(30);s(61);function H(){var e=Object(n.useRef)(),t=Object(n.useRef)(),s=Object(n.useContext)(j),i=s.isFetching,c=s.setisFetching,a=s.settoken,l=function(){var s=Object(d.a)(o.a.mark((function s(n){var i,l;return o.a.wrap((function(s){for(;;)switch(s.prev=s.next){case 0:return c(!0),n.preventDefault(),s.prev=2,s.next=5,v.a.post("https://smart-chat15.herokuapp.com/api/auth/login",{email:e.current.value,password:t.current.value});case 5:l=s.sent,(null===(i=l.data)||void 0===i?void 0:i.msg)?(W.b.error(l.data.msg),c(!1)):(sessionStorage.setItem("token",l.data.token),a(l.data.token)),s.next=13;break;case 9:s.prev=9,s.t0=s.catch(2),W.b.error(s.t0),c(!1);case 13:case"end":return s.stop()}}),s,null,[[2,9]])})));return function(e){return s.apply(this,arguments)}}();return Object(u.jsxs)("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",height:"100vh",backgroundColor:"rgb(198 195 195)"},children:[Object(u.jsxs)("div",{className:"responsive",children:[Object(u.jsx)("strong",{style:{fontSize:"70px"},children:Object(u.jsx)("span",{className:"badge bg-primary",children:"Smart-Chats"})}),Object(u.jsx)("p",{style:{fontSize:"25px",width:"25vw"},children:Object(u.jsx)("b",{children:" Connect with friends around world and chat with them."})})]}),Object(u.jsx)("div",{className:"w1",style:{backgroundColor:"white",position:"relative",left:"1vw",border:"solid #fcfaf8 1px",borderRadius:"10px"},children:Object(u.jsxs)("form",{action:"",className:"w1",style:{position:"relative",paddingBottom:"90px"},onSubmit:l,children:[Object(u.jsx)("input",{type:"email",required:!0,style:{width:"90%",height:" 50px ",position:"relative",top:"15px",borderRadius:"10px",border:"solid #cfc9c9 2px"},placeholder:"Email",ref:e}),Object(u.jsx)("input",{type:"password",required:!0,style:{width:"90%",height:" 50px ",position:"relative",top:"30px",borderRadius:"10px",border:"solid #cfc9c9 2px"},minLength:"6",placeholder:"Password",ref:t}),Object(u.jsx)("div",{style:{width:"90%",height:"25px"},children:Object(u.jsx)("p",{style:{display:"flex",justifyContent:"center",position:"relative",top:"45px",color:"#1877f2"},children:Object(u.jsx)("b",{children:"Forgot Password?"})})}),Object(u.jsx)("button",{className:"btn btn-primary",type:"submit",style:{width:"90%",height:" 50px ",position:"relative",top:"60px",borderRadius:"10px"},children:Object(u.jsx)("b",{children:i?Object(u.jsx)(M.a,{color:"inherit",size:"4vh"}):"Log In"})}),Object(u.jsx)("div",{style:{width:"90%",display:"flex",justifyContent:"center",position:"relative",top:"75px",textAlign:"center"},children:Object(u.jsxs)("b",{children:["Don't have an account?",Object(u.jsx)(O.b,{to:"/signup",children:"Create Account"})]})})]})}),Object(u.jsx)(W.a,{})]})}function T(){var e=Object(n.useRef)(),t=Object(n.useRef)(),s=Object(n.useRef)(),i=Object(n.useRef)(),c=Object(n.useContext)(j),a=c.isFetching,l=c.setisFetching,r=c.settoken,b=function(){var n=Object(d.a)(o.a.mark((function n(c){var a,d,u;return o.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(c.preventDefault(),l(!0),s.current.value===i.current.value){n.next=6;break}s.current.setCustomValidity("Passwords don't match"),n.next=18;break;case 6:return a={name:e.current.value,email:t.current.value,password:s.current.value,cpassword:i.current.value},n.prev=7,n.next=10,v.a.post("https://smart-chat15.herokuapp.com/api/auth",a);case 10:u=n.sent,(null===(d=u.data)||void 0===d?void 0:d.msg)?(W.b.error(u.data.msg),l(!1)):(sessionStorage.setItem("token",u.data.token),r(u.data.token)),n.next=18;break;case 14:n.prev=14,n.t0=n.catch(7),W.b.error(n.t0),l(!1);case 18:case"end":return n.stop()}}),n,null,[[7,14]])})));return function(e){return n.apply(this,arguments)}}();return Object(u.jsxs)("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",height:"100vh",backgroundColor:"rgb(198 195 195)"},children:[Object(u.jsxs)("div",{className:"responsive",children:[Object(u.jsx)("strong",{style:{fontSize:"70px"},children:Object(u.jsx)("span",{className:"badge bg-primary",children:"Smart-Chats"})}),Object(u.jsx)("p",{style:{fontSize:"25px",width:"25vw"},children:Object(u.jsx)("b",{children:" Connect with friends around world and chat with them."})})]}),Object(u.jsx)("div",{className:"w1",style:{backgroundColor:"white",position:"relative",left:"1vw",border:"solid #fcfaf8 1px",borderRadius:"10px"},children:Object(u.jsxs)("form",{action:"",className:"w1",style:{position:"relative",paddingBottom:"90px"},onSubmit:b,children:[Object(u.jsx)("input",{type:"text",style:{width:"90%",height:"50px",position:"relative",top:"15px",borderRadius:"10px",border:"solid #cfc9c9 2px"},placeholder:"Username without space",pattern:"^\\S+$",required:!0,ref:e}),Object(u.jsx)("input",{type:"email",style:{width:"90%",height:" 50px ",position:"relative",top:"30px",borderRadius:"10px",border:"solid #cfc9c9 2px"},placeholder:"Email",required:!0,ref:t}),Object(u.jsx)("input",{type:"password",style:{width:"90%",height:"50px",position:"relative",top:"45px",borderRadius:"10px",border:"solid #cfc9c9 2px"},placeholder:"Password",required:!0,ref:s,minLength:"6"}),Object(u.jsx)("input",{type:"password",style:{width:"90%",height:"50px",position:"relative",top:"60px",borderRadius:"10px",border:"solid #cfc9c9 2px"},placeholder:"Confirm Password",required:!0,ref:i,minLength:"6"}),Object(u.jsx)("button",{className:"btn btn-primary",style:{width:"90%",height:"50px",position:"relative",top:"75px",borderRadius:"10px"},type:"submit",children:Object(u.jsx)("b",{children:a?Object(u.jsx)(M.a,{color:"inherit",size:"4vh"}):"Sign Up"})}),Object(u.jsx)("div",{style:{width:"90%",height:"50px",display:"flex",justifyContent:"center",position:"relative",top:"90px",textAlign:"center"},children:Object(u.jsxs)("b",{children:["Already have an account?",Object(u.jsx)(O.b,{to:"/login",children:"Log In"})]})})]})}),Object(u.jsx)(W.a,{})]})}function q(e){var t=Object(n.useState)(null),s=Object(l.a)(t,2),i=s[0],c=s[1];return Object(n.useEffect)((function(){var t=function(){var t=Object(d.a)(o.a.mark((function t(){var s;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,v.a.get("https://smart-chat15.herokuapp.com/"+"api/users/".concat(e.conversation));case 2:s=t.sent,c(s.data);case 4:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();t()}),[]),Object(u.jsxs)("div",{className:"d-flex align-items-center nav-link link-dark text-decoration-none",style:{cursor:"pointer"},children:[Object(u.jsx)("img",{src:(null===i||void 0===i?void 0:i.profilePicture)?null===i||void 0===i?void 0:i.profilePicture:p,alt:"",width:32,height:32,className:"rounded-circle me-2"}),Object(u.jsx)("strong",{children:null===i||void 0===i?void 0:i.name})]})}function J(e){var t=Object(n.useState)(null),s=Object(l.a)(t,2),i=s[0],c=s[1];Object(n.useEffect)((function(){var t=function(){var t=Object(d.a)(o.a.mark((function t(){var s;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,v.a.get("https://smart-chat15.herokuapp.com/"+"api/users/".concat(e.msg.sender));case 2:s=t.sent,c(s.data);case 4:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();t()}),[e.msg.sender]);var a=Object(n.useContext)(j).user;return Object(u.jsxs)("div",{className:a._id===e.msg.sender?"mine":"other",style:{display:"block"},children:[Object(u.jsxs)("div",{style:{display:"flex"},children:[Object(u.jsx)("img",{src:(null===i||void 0===i?void 0:i.profilePicture)?null===i||void 0===i?void 0:i.profilePicture:p,alt:"",width:32,height:32,className:"rounded-circle me-2"}),Object(u.jsx)("div",{className:"chat",style:{height:"100%",backgroundColor:a._id!==e.msg.sender?"#afb4b8":"#0d6efd",color:a._id!==e.msg.sender?"black":"white",borderRadius:"25px"},children:Object(u.jsx)("p",{style:{position:"relative",top:"6px",left:"13px",width:"85%"},children:e.msg.text})})]}),Object(u.jsx)("small",{style:{position:"relative",left:"2.5vw"},children:Object(x.a)(e.msg.createdAt)})]})}var K=s(72);function G(){var e=Object(n.useState)([]),t=Object(l.a)(e,2),s=t[0],i=t[1],c=Object(n.useContext)(j).user,a=Object(n.useRef)(),r=Object(n.useState)(""),b=Object(l.a)(r,2),h=b[0],x=b[1],f=Object(n.useState)(null),O=Object(l.a)(f,2),m=O[0],g=O[1],w=Object(n.useState)(null),k=Object(l.a)(w,2),C=k[0],N=k[1],_=Object(n.useState)(null),I=Object(l.a)(_,2),F=I[0],P=I[1],U=Object(n.useState)([]),D=Object(l.a)(U,2),R=D[0],B=D[1],E=function(){var e=Object(d.a)(o.a.mark((function e(){var t;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log(m),e.next=3,v.a.get("https://smart-chat15.herokuapp.com/"+"api/messages/".concat(null===m||void 0===m?void 0:m._id));case 3:t=e.sent,N(t.data);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();Object(n.useEffect)((function(){a.current=K.a.connect("https://socketio15.herokuapp.com/"),a.current.on("getMessage",(function(e){P({senderId:e.senderId,text:e.text})}))}),[]),Object(n.useEffect)((function(){if(c){var e;a.current.emit("addUser",null===c||void 0===c?void 0:c._id);var t=null===c||void 0===c?void 0:c.following;0!==(null===(e=t=(null===c||void 0===c?void 0:c.following)?t.concat(null===c||void 0===c?void 0:c.followers.filter((function(e){return!(null===c||void 0===c?void 0:c.following.includes(e))}))):null===c||void 0===c?void 0:c.followers)||void 0===e?void 0:e.length)&&i(t)}}),[c]),Object(n.useEffect)((function(){s&&s.length>0&&a.current.on("getUser",(function(e){B(null===s||void 0===s?void 0:s.filter((function(t){return e.some((function(e){return e.userId===t}))})))}))}),[s]);var L=Object(n.useState)(null),A=Object(l.a)(L,2),z=A[0],M=A[1];Object(n.useEffect)((function(){var e=function(){var e=Object(d.a)(o.a.mark((function e(){var t,s,n;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s=null===m||void 0===m||null===(t=m.members)||void 0===t?void 0:t.find((function(e){return e!==c._id})),e.next=3,v.a.get("https://smart-chat15.herokuapp.com/"+"api/users/".concat(s));case 3:n=e.sent,M(n.data);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();e()}),[m]);var W=function(){var e=Object(d.a)(o.a.mark((function e(){var t,s;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:s=null===(t=m.members)||void 0===t?void 0:t.find((function(e){return e!==c._id})),console.log(s),v.a.post("https://smart-chat15.herokuapp.com/api/messages",{conversationId:m._id,sender:c._id,text:h}).then((function(e){a.current.emit("sendMessage",{senderId:c._id,receiverId:s,text:h}),x(""),E()})).catch((function(e){return console.log(e)}));case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();Object(n.useEffect)((function(){(null===m||void 0===m?void 0:m._id)&&E()}),[m,F]),Object(n.useEffect)((function(){var e=document.getElementById("scrollable");e&&(e.scrollTop=e.scrollHeight,e.animate({scrollTop:e.scrollHeight}))}),[C]);var H=function(){var e=Object(d.a)(o.a.mark((function e(t){var s,n;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v.a.get("https://smart-chat15.herokuapp.com/"+"api/conversation/".concat(t,"/").concat(c._id));case 2:if("no convo"===(s=e.sent).data){e.next=7;break}g(s.data),e.next=15;break;case 7:return e.next=9,v.a.post("https://smart-chat15.herokuapp.com/api/conversation",{senderId:c._id,receiverId:t});case 9:if(!e.sent.data){e.next=15;break}return e.next=13,v.a.get("https://smart-chat15.herokuapp.com/"+"api/conversation/".concat(t,"/").concat(c._id));case 13:n=e.sent,g(n.data);case 15:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(u.jsxs)(u.Fragment,{children:[Object(u.jsx)(y,{}),Object(u.jsxs)("div",{className:"d-flex",style:{overflowX:"hidden",overflowY:"hidden"},children:[Object(u.jsxs)("div",{className:"p-3 bg-light bar",style:{position:"relative",top:"57px"},children:[Object(u.jsx)("strong",{style:{fontSize:"25px"},children:"Conversations"}),Object(u.jsx)("hr",{}),Object(u.jsx)("ul",{className:"nav nav-pills flex-column mb-auto",children:s?s.map((function(e){return Object(u.jsx)("li",{onClick:function(){return H(e)},children:Object(u.jsx)(q,{conversation:e})})})):Object(u.jsx)("div",{children:Object(u.jsx)("b",{children:"Add friends to start conversation"})})})]}),Object(u.jsx)("div",{className:"midmessage",style:{position:"relative",top:"57px",left:"2vw"},children:Object(u.jsx)("div",{className:"card mb-3",style:{height:"97.8vh"},children:Object(u.jsx)("div",{className:"card-body",children:m?Object(u.jsxs)(u.Fragment,{children:[Object(u.jsxs)("div",{style:{height:"5vh",display:"flex",alignItems:"center",justifyContent:"space-between"},children:[Object(u.jsxs)("div",{children:[Object(u.jsx)("img",{src:(null===z||void 0===z?void 0:z.profilePicture)?null===z||void 0===z?void 0:z.profilePicture:p,alt:"",width:32,height:32,className:"rounded-circle me-2"}),Object(u.jsx)("strong",{children:null===z||void 0===z?void 0:z.name})]}),Object(u.jsxs)("div",{children:[Object(u.jsx)("div",{className:"arrow",style:{cursor:"pointer",paddingRight:"20px"},type:"button","data-bs-toggle":"modal","data-bs-target":"#staticBackdrop",children:Object(u.jsx)("i",{class:"fas fa-arrow-down"})}),Object(u.jsx)("div",{className:"online",style:{cursor:"pointer"},type:"button","data-bs-toggle":"modal","data-bs-target":"#staticBackdrop1",children:Object(u.jsx)("i",{class:"fas fa-blog"})})]}),Object(u.jsx)("div",{class:"modal fade",id:"staticBackdrop","data-bs-backdrop":"static","data-bs-keyboard":"false",tabindex:"-1","aria-labelledby":"staticBackdropLabel","aria-hidden":"true",children:Object(u.jsx)("div",{class:"modal-dialog",children:Object(u.jsxs)("div",{class:"modal-content",children:[Object(u.jsxs)("div",{class:"modal-header",style:{color:"white",backgroundColor:"black"},children:[Object(u.jsx)("h5",{class:"modal-title",id:"staticBackdropLabel",children:Object(u.jsx)("b",{children:"Converations"})}),Object(u.jsx)("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})]}),Object(u.jsx)("div",{class:"modal-body",children:Object(u.jsx)("ul",{className:"nav nav-pills flex-column mb-auto",children:s?s.map((function(e){return Object(u.jsx)("li",{"data-bs-dismiss":"modal",onClick:function(){return H(e)},children:Object(u.jsx)(q,{conversation:e})})})):Object(u.jsx)("div",{children:Object(u.jsx)("b",{children:"Add friends to start conversation"})})})}),Object(u.jsx)("div",{class:"modal-footer",children:Object(u.jsx)("button",{type:"button",class:"btn btn-secondary","data-bs-dismiss":"modal",children:"Close"})})]})})}),Object(u.jsx)("div",{class:"modal fade",id:"staticBackdrop1","data-bs-backdrop":"static","data-bs-keyboard":"false",tabindex:"-1","aria-labelledby":"staticBackdropLabel","aria-hidden":"true",children:Object(u.jsx)("div",{class:"modal-dialog",children:Object(u.jsxs)("div",{class:"modal-content",children:[Object(u.jsxs)("div",{class:"modal-header",style:{color:"white",backgroundColor:"black"},children:[Object(u.jsx)("h5",{class:"modal-title",id:"staticBackdropLabel",children:Object(u.jsx)("b",{children:"Online Users"})}),Object(u.jsx)("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})]}),Object(u.jsx)("div",{class:"modal-body",children:Object(u.jsx)("ul",{className:"nav nav-pills flex-column mb-auto",children:R&&0!==R.length?R.map((function(e){return Object(u.jsx)("li",{"data-bs-dismiss":"modal",onClick:function(){return H(e)},style:{cursor:"pointer"},children:Object(u.jsx)(S,{id:e})})})):Object(u.jsx)("div",{children:Object(u.jsx)("b",{children:"No one is online"})})})}),Object(u.jsx)("div",{class:"modal-footer",children:Object(u.jsx)("button",{type:"button",class:"btn btn-secondary","data-bs-dismiss":"modal",children:"Close"})})]})})})]}),Object(u.jsx)("hr",{}),Object(u.jsx)("div",{className:"textheight",id:"scrollable",style:{overflowY:"scroll",overflowX:"hidden"},children:C&&C.map((function(e){return Object(u.jsx)(J,{msg:e})}))}),Object(u.jsxs)("div",{style:{display:"flex",position:"absolute",bottom:"50px",width:"100%"},children:[Object(u.jsx)("textarea",{className:"textwidth",placeholder:"Write something....",style:{resize:"none",height:"20vh",borderRadius:"5px"},value:h,onChange:function(e){return x(e.target.value)}}),Object(u.jsx)("button",{type:"button",className:"btn btn-success buttonwidth",style:{height:"40px",position:"relative",left:"3px"},disabled:""===h?"true":"",onClick:W,children:"Send"})]})]}):Object(u.jsxs)(u.Fragment,{children:[Object(u.jsx)("div",{className:"arrow",style:{cursor:"pointer"},type:"button","data-bs-toggle":"modal","data-bs-target":"#staticBackdrop",children:Object(u.jsx)("i",{class:"fas fa-arrow-down"})}),Object(u.jsx)("div",{class:"modal fade",id:"staticBackdrop","data-bs-backdrop":"static","data-bs-keyboard":"false",tabindex:"-1","aria-labelledby":"staticBackdropLabel","aria-hidden":"true",children:Object(u.jsx)("div",{class:"modal-dialog",children:Object(u.jsxs)("div",{class:"modal-content",children:[Object(u.jsxs)("div",{class:"modal-header",style:{color:"white",backgroundColor:"black"},children:[Object(u.jsx)("h5",{class:"modal-title",id:"staticBackdropLabel",children:Object(u.jsx)("b",{children:"Coverations"})}),Object(u.jsx)("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})]}),Object(u.jsx)("div",{class:"modal-body",children:Object(u.jsx)("ul",{className:"nav nav-pills flex-column mb-auto",children:s?s.map((function(e){return Object(u.jsx)("li",{"data-bs-dismiss":"modal",onClick:function(){return H(e)},children:Object(u.jsx)(q,{conversation:e})})})):Object(u.jsx)("div",{children:Object(u.jsx)("b",{children:"Add friends to start conversation"})})})}),Object(u.jsx)("div",{class:"modal-footer",children:Object(u.jsx)("button",{type:"button",class:"btn btn-secondary","data-bs-dismiss":"modal",children:"Close"})})]})})}),Object(u.jsx)("div",{style:{fontSize:"40px",textAlign:"center",display:"flex",justifyContent:"center",alignItems:"center",height:"85vh"},children:Object(u.jsx)("strong",{children:"Open a conversation to start chat"})})]})})})}),Object(u.jsxs)("div",{className:"tar",style:{position:"relative",top:"65px",left:"4vw",width:"22vw"},children:[Object(u.jsx)("strong",{style:{fontSize:"30px"},children:"Online friends"}),Object(u.jsxs)("ul",{className:"nav nav-pills flex-column mb-auto",children:[Object(u.jsx)("hr",{}),R&&0!==R.length?R.map((function(e){return Object(u.jsx)("li",{onClick:function(){return H(e)},style:{cursor:"pointer"},children:Object(u.jsx)(S,{id:e})})})):Object(u.jsx)("div",{children:Object(u.jsx)("b",{children:"No one is online"})})]})]})]})]})}var V=s(71);function X(){var e=Object(n.useState)(null),t=Object(l.a)(e,2),s=t[0],i=t[1],c=Object(f.h)().username,a=Object(n.useContext)(j).user;return Object(n.useEffect)((function(){var e=function(){var e=Object(d.a)(o.a.mark((function e(){var t,s;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v.a.get("https://smart-chat15.herokuapp.com/api/users/");case 2:t=e.sent,s=t.data.filter((function(e){return e.name.includes(c)})),i(s);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();e()}),[c]),Object(u.jsx)(u.Fragment,{children:null!==a&&null!=s?Object(u.jsxs)(u.Fragment,{children:[Object(u.jsx)(y,{}),Object(u.jsx)("div",{className:"container",style:{position:"relative",top:"57px",width:"85vw"},children:0!==s.length?Object(u.jsx)(u.Fragment,{children:Object(u.jsx)("ul",{className:"nav nav-pills flex-column mb-auto py-2",children:s.map((function(e){return Object(u.jsx)("li",{className:"nav-link link-dark text-decoration-none",style:{listStyle:"none"},children:Object(u.jsxs)("div",{className:"card-body d-flex",children:[Object(u.jsx)(O.b,{to:"/profile/".concat(null===e||void 0===e?void 0:e.name),children:Object(u.jsx)("div",{style:{height:"15vw",width:"15vw",display:"flex",justifyContent:"center",alignItems:"center",border:"solid white 3px",backgroundColor:"black",overflow:"hidden"},class:"avatar rounded-circle",children:Object(u.jsx)("img",{src:(null===e||void 0===e?void 0:e.profilePicture)?null===e||void 0===e?void 0:e.profilePicture:p,alt:"",style:{maxHeight:"100%",maxWidth:"100%"}})})}),Object(u.jsx)("div",{style:{width:"100%",height:"15vw",position:"relative",display:"flex",alignItems:"center"},children:Object(u.jsxs)("ul",{style:{listStyle:"none",fontSize:"2vw"},children:[Object(u.jsx)("li",{children:Object(u.jsx)("strong",{children:null===e||void 0===e?void 0:e.name})}),Object(u.jsxs)("li",{children:[Object(u.jsx)("b",{children:"City:"})," ",(null===e||void 0===e?void 0:e.city)?null===e||void 0===e?void 0:e.city:"Unknown"]}),Object(u.jsxs)("li",{children:[Object(u.jsx)("b",{children:"From:"})," ",(null===e||void 0===e?void 0:e.from)?null===e||void 0===e?void 0:e.from:"Unknown"]}),Object(u.jsxs)("li",{children:[Object(u.jsx)("b",{children:"Relationship Status:"})," ",(null===e||void 0===e?void 0:e.relationship)?null===e||void 0===e?void 0:e.relationship:"Unknown"]})]})})]})})}))})}):Object(u.jsx)("div",{style:{fontSize:"80px",display:"flex",justifyContent:"center",textAlign:"center"},children:"No results found"})})]}):Object(u.jsx)("div",{})})}var Y=function(){var e=Object(n.useContext)(j),t=e.user,s=e.setisFetching,i=e.setuser,c=e.token,a=function(){var e=Object(d.a)(o.a.mark((function e(t){var n;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v.a.get("https://smart-chat15.herokuapp.com/"+"api/users/".concat(t));case 2:n=e.sent,i(n.data),s(!1),console.log(n.data);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),r=Object(n.useState)(0),b=Object(l.a)(r,2),h=b[0],p=b[1],x=function(){var e=Object(d.a)(o.a.mark((function e(t){var s;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,v.a.get("https://smart-chat15.herokuapp.com/api/auth/verify",{headers:{token:t}});case 3:s=e.sent,a(s.data._id),console.log(s.data),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.log(e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t){return e.apply(this,arguments)}}();return Object(n.useEffect)((function(){sessionStorage.getItem("token")&&x(sessionStorage.getItem("token"))}),[c]),Object(u.jsxs)(O.a,{basename:"/smart-chats15",children:[Object(u.jsx)(V.a,{color:"white",height:"3px",progress:h}),Object(u.jsxs)(f.d,{children:[Object(u.jsx)(f.b,{exact:!0,path:"/",children:(null===t||void 0===t?void 0:t._id)||c||sessionStorage.getItem("token")?Object(u.jsx)(_,{}):Object(u.jsx)(T,{})}),Object(u.jsx)(f.b,{exact:!0,path:"/messenger",children:(null===t||void 0===t?void 0:t._id)||c||sessionStorage.getItem("token")?Object(u.jsx)(G,{}):Object(u.jsx)(T,{})}),Object(u.jsx)(f.b,{exact:!0,path:"/login",children:(null===t||void 0===t?void 0:t._id)||c||sessionStorage.getItem("token")?Object(u.jsx)(f.a,{to:"/"}):Object(u.jsx)(H,{})}),Object(u.jsx)(f.b,{exact:!0,path:"/signup",children:(null===t||void 0===t?void 0:t._id)||c||sessionStorage.getItem("token")?Object(u.jsx)(f.a,{to:"/"}):Object(u.jsx)(T,{})}),Object(u.jsx)(f.b,{exact:!0,path:"/profile/:username",children:(null===t||void 0===t?void 0:t._id)||c||sessionStorage.getItem("token")?Object(u.jsx)(z,{progress:p}):Object(u.jsx)(T,{})}),Object(u.jsx)(f.b,{exact:!0,path:"/search/:username",children:(null===t||void 0===t?void 0:t._id)||c||sessionStorage.getItem("token")?Object(u.jsx)(X,{}):Object(u.jsx)(T,{})})]})]})},Z=function(e){e&&e instanceof Function&&s.e(3).then(s.bind(null,125)).then((function(t){var s=t.getCLS,n=t.getFID,i=t.getFCP,c=t.getLCP,a=t.getTTFB;s(e),n(e),i(e),c(e),a(e)}))},$=s(124);a.a.render(Object(u.jsx)(i.a.StrictMode,{children:Object(u.jsx)($.a,{children:Object(u.jsx)(b,{children:Object(u.jsx)(Y,{})})})}),document.getElementById("root")),Z()},79:function(e,t,s){},81:function(e,t,s){},82:function(e,t,s){}},[[115,1,2]]]);
//# sourceMappingURL=main.bfa00b08.chunk.js.map